/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0xedc191=_0x320f;function _0x320f(_0x32e808,_0x55b0d3){const _0xadb93c=_0xadb9();return _0x320f=function(_0x320f57,_0x258e5e){_0x320f57=_0x320f57-0xd6;let _0x5dc721=_0xadb93c[_0x320f57];return _0x5dc721;},_0x320f(_0x32e808,_0x55b0d3);}(function(_0x352ee4,_0x1072bf){const _0x119923=_0x320f,_0x29baf7=_0x352ee4();while(!![]){try{const _0x570d6d=-parseInt(_0x119923(0x116))/0x1*(parseInt(_0x119923(0xe8))/0x2)+-parseInt(_0x119923(0xed))/0x3*(-parseInt(_0x119923(0xe4))/0x4)+parseInt(_0x119923(0xe2))/0x5*(-parseInt(_0x119923(0xee))/0x6)+parseInt(_0x119923(0x111))/0x7*(parseInt(_0x119923(0xe9))/0x8)+parseInt(_0x119923(0xd9))/0x9*(-parseInt(_0x119923(0xf9))/0xa)+parseInt(_0x119923(0xfd))/0xb*(-parseInt(_0x119923(0xda))/0xc)+parseInt(_0x119923(0xe0))/0xd;if(_0x570d6d===_0x1072bf)break;else _0x29baf7['push'](_0x29baf7['shift']());}catch(_0x3b603d){_0x29baf7['push'](_0x29baf7['shift']());}}}(_0xadb9,0xeda2f));import{ContextPlugin as _0x369485}from'ckeditor5/src/core.js';import{Collection as _0x550935,CKEditorError as _0x394e59}from'ckeditor5/src/utils.js';import _0x4bde45 from'./websocketgateway.js';import{Users as _0x4c7d62}from'ckeditor5-collaboration/src/collaboration-core.js';function _0xadb9(){const _0x2c9c15=['isOfficialPlugin','requires','context','isPremiumPlugin','clear','mySessionId','10847950iUFKWL','getUser','sessionId','fire','2222TuwyWF','change:state','channelConnectedUsers','_registeredSessions','register','_handleSessionRemove','sessions-unregister-not-exist','Sessions','getUserSessions','isMe','unregister','remove','delete','has','allConnectedUsers','connected','connection','values','getUserRole','channelSessions','7XigUiv','addUser','get','plugins','user','222881QGdgkS','_uniqueUsersCount','defineMe','pluginName','9kcrzNt','13152ABWVOX','_handleSessionAdd','state','assign','_users','orderNumber','26803296MlaMVA','forEach','5yByxwV','add','172604QdSWEz','getUserBySessionId','stopListening','role','14xTlmTZ','13373032mmCBGG','_createUser','size','listenTo','69VHEdcb','5317086kyzepl','set','sessions-register-already-registered','init','sessionAdd:'];_0xadb9=function(){return _0x2c9c15;};return _0xadb9();}export default class i extends _0x369485{static get[_0xedc191(0xd8)](){const _0x3e5551=_0xedc191;return _0x3e5551(0x104);}static get[_0xedc191(0xf3)](){return!0x0;}static get[_0xedc191(0xf6)](){return!0x0;}static get[_0xedc191(0xf4)](){return[_0x4bde45,_0x4c7d62];}constructor(_0x11bba2){const _0x359e9e=_0xedc191;super(_0x11bba2),this[_0x359e9e(0x110)]=new Map(),this[_0x359e9e(0xff)]=new Map(),this[_0x359e9e(0x10b)]=new _0x550935(),this[_0x359e9e(0x100)]=new Map(),this[_0x359e9e(0xd6)]=0x0,this[_0x359e9e(0xde)]=this[_0x359e9e(0xf5)][_0x359e9e(0x114)][_0x359e9e(0x113)](_0x4c7d62);}[_0xedc191(0xf1)](){const _0x5afe30=_0xedc191,_0x4062e0=this[_0x5afe30(0xf5)][_0x5afe30(0x114)][_0x5afe30(0x113)](_0x4bde45);this[_0x5afe30(0xec)](_0x4062e0,_0x5afe30(0xfe),(_0xe23c1f,_0x2b3430,_0x5d8526)=>{const _0x221b70=_0x5afe30;if(_0x221b70(0x10c)!==_0x5d8526)this[_0x221b70(0x110)][_0x221b70(0xe1)](_0x18a0c8=>_0x18a0c8[_0x221b70(0xf7)]()),this[_0x221b70(0xff)][_0x221b70(0xe1)](_0x43dad4=>_0x43dad4[_0x221b70(0xf7)]()),this[_0x221b70(0x10b)][_0x221b70(0xf7)]();else{for(const [_0x26e37c,_0x4befe8]of this[_0x221b70(0x100)])for(const _0x4e38d4 of _0x4befe8)this[_0x221b70(0xdb)](_0x26e37c,_0x4e38d4);}}),this[_0x5afe30(0xea)](_0x4062e0[_0x5afe30(0x10d)]['me'],!0x0);}[_0xedc191(0x101)](_0x3edee3,_0xa15894){const _0x3da689=_0xedc191;if(this[_0x3da689(0x100)][_0x3da689(0x10a)](_0x3edee3))throw new _0x394e59(_0x3da689(0xf0),null,{'channelId':_0x3edee3});this[_0x3da689(0x100)][_0x3da689(0xef)](_0x3edee3,_0xa15894),this[_0x3da689(0x110)][_0x3da689(0xef)](_0x3edee3,new _0x550935()),this[_0x3da689(0xff)][_0x3da689(0xef)](_0x3edee3,new _0x550935()),this[_0x3da689(0xec)](_0xa15894,_0x3da689(0xe3),(_0x7578ae,_0x57b2bc)=>this[_0x3da689(0xdb)](_0x3edee3,_0x57b2bc)),this[_0x3da689(0xec)](_0xa15894,_0x3da689(0x108),(_0x13f026,_0x45acaa)=>this[_0x3da689(0x102)](_0x3edee3,_0x45acaa));for(const _0x18006a of _0xa15894)this[_0x3da689(0xdb)](_0x3edee3,_0x18006a);}[_0xedc191(0x107)](_0xe29b7a){const _0x31442f=_0xedc191;if(!this[_0x31442f(0x100)][_0x31442f(0x10a)](_0xe29b7a))throw new _0x394e59(_0x31442f(0x103),null,{'channelId':_0xe29b7a});const _0x21fcfe=this[_0x31442f(0x100)][_0x31442f(0x113)](_0xe29b7a);this[_0x31442f(0xe6)](_0x21fcfe);for(const _0x15e125 of _0x21fcfe)_0x31442f(0x10c)===this[_0x31442f(0xf5)][_0x31442f(0x114)][_0x31442f(0x113)](_0x4bde45)[_0x31442f(0xdc)]&&this[_0x31442f(0x102)](_0xe29b7a,_0x15e125);this[_0x31442f(0x100)][_0x31442f(0x109)](_0xe29b7a),this[_0x31442f(0x110)][_0x31442f(0x109)](_0xe29b7a),this[_0x31442f(0xff)][_0x31442f(0x109)](_0xe29b7a);}get[_0xedc191(0xf8)](){const _0x4d24fa=_0xedc191;return this[_0x4d24fa(0xf5)][_0x4d24fa(0x114)][_0x4d24fa(0x113)](_0x4bde45)[_0x4d24fa(0x10d)][_0x4d24fa(0xfb)];}[_0xedc191(0xe5)](_0x4f3b3b){const _0x43229a=_0xedc191;for(const _0x3aa737 of this[_0x43229a(0x110)][_0x43229a(0x10e)]())for(const _0x27a03e of _0x3aa737)if(_0x27a03e['id']===_0x4f3b3b)return _0x27a03e[_0x43229a(0x115)];}[_0xedc191(0x105)](_0xbc1af0,_0x1e32b3){const _0x106992=_0xedc191,_0x226d99=_0x1e32b3?[this[_0x106992(0x110)][_0x106992(0x113)](_0x1e32b3)]:this[_0x106992(0x110)][_0x106992(0x10e)](),_0x47af71=new Set();for(const _0xa48c2 of _0x226d99)for(const _0x5216fa of _0xa48c2)_0x5216fa[_0x106992(0x115)]['id']===_0xbc1af0['id']&&_0x47af71[_0x106992(0xe3)](_0x5216fa['id']);return _0x47af71;}[_0xedc191(0x10f)](_0x5d244b){const _0x5c2178=_0xedc191;for(const _0x53b855 of this[_0x5c2178(0x110)][_0x5c2178(0x10e)]())for(const _0xd33f64 of _0x53b855)if(_0xd33f64[_0x5c2178(0x115)]===_0x5d244b)return _0xd33f64[_0x5c2178(0xe7)];}[_0xedc191(0xdb)](_0x1ebaee,_0x4d99bd){const _0x4d319f=_0xedc191;if(_0x4d319f(0x10c)!==this[_0x4d319f(0xf5)][_0x4d319f(0x114)][_0x4d319f(0x113)](_0x4bde45)[_0x4d319f(0xdc)])return;const _0x2b53d6=_0x4d99bd[_0x4d319f(0x115)],_0x12f322=this[_0x4d319f(0xde)][_0x4d319f(0xfa)](_0x2b53d6['id'])||this[_0x4d319f(0xea)](_0x2b53d6),_0x597268=Object[_0x4d319f(0xdd)]({},_0x4d99bd,{'user':_0x12f322});this[_0x4d319f(0x110)][_0x4d319f(0x113)](_0x1ebaee)[_0x4d319f(0xe3)](_0x597268);const _0x38236c=this[_0x4d319f(0xff)][_0x4d319f(0x113)](_0x1ebaee);_0x38236c[_0x4d319f(0x10a)](_0x12f322['id'])||_0x38236c[_0x4d319f(0xe3)](_0x12f322),this[_0x4d319f(0x10b)][_0x4d319f(0x10a)](_0x12f322['id'])||this[_0x4d319f(0x10b)][_0x4d319f(0xe3)](_0x12f322,_0x12f322[_0x4d319f(0x106)]?0x0:void 0x0),this[_0x4d319f(0xfc)](_0x4d319f(0xf2)+_0x1ebaee,{'channelId':_0x1ebaee,'session':_0x597268});}[_0xedc191(0x102)](_0x56f892,_0x4d1bc2){const _0x2fa35a=_0xedc191;if(_0x2fa35a(0x10c)!==this[_0x2fa35a(0xf5)][_0x2fa35a(0x114)][_0x2fa35a(0x113)](_0x4bde45)[_0x2fa35a(0xdc)])return;const _0x390e3b=this[_0x2fa35a(0xff)][_0x2fa35a(0x113)](_0x56f892),_0x27d66f=_0x4d1bc2[_0x2fa35a(0x115)];_0x27d66f['id']&&(this[_0x2fa35a(0x110)][_0x2fa35a(0x113)](_0x56f892)[_0x2fa35a(0x108)](_0x4d1bc2['id']),_0x390e3b[_0x2fa35a(0x10a)](_0x27d66f['id'])&&!this[_0x2fa35a(0x105)](_0x27d66f,_0x56f892)[_0x2fa35a(0xeb)]&&_0x390e3b[_0x2fa35a(0x108)](_0x27d66f['id']),this[_0x2fa35a(0x10b)][_0x2fa35a(0x113)](_0x27d66f['id'])&&!this[_0x2fa35a(0x105)](_0x27d66f)[_0x2fa35a(0xeb)]&&this[_0x2fa35a(0x10b)][_0x2fa35a(0x108)](_0x27d66f['id']));}[_0xedc191(0xea)](_0x1ff92f,_0x19ebaf){const _0x5722ee=_0xedc191,_0x432079=this[_0x5722ee(0xde)][_0x5722ee(0x112)](_0x1ff92f);return _0x19ebaf&&this[_0x5722ee(0xde)][_0x5722ee(0xd7)](_0x1ff92f['id']),_0x432079[_0x5722ee(0xdf)]=this[_0x5722ee(0xd6)]++,_0x432079;}}