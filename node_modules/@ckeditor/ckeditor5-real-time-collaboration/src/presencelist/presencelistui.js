/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x1419d1=_0x287b;(function(_0x1b8431,_0x27f30c){const _0x340bcc=_0x287b,_0x5481a9=_0x1b8431();while(!![]){try{const _0x565198=parseInt(_0x340bcc(0x153))/0x1*(parseInt(_0x340bcc(0x165))/0x2)+-parseInt(_0x340bcc(0x15d))/0x3*(parseInt(_0x340bcc(0x145))/0x4)+parseInt(_0x340bcc(0x174))/0x5*(-parseInt(_0x340bcc(0x14c))/0x6)+-parseInt(_0x340bcc(0x182))/0x7+-parseInt(_0x340bcc(0x172))/0x8*(parseInt(_0x340bcc(0x192))/0x9)+parseInt(_0x340bcc(0x194))/0xa*(-parseInt(_0x340bcc(0x1a1))/0xb)+-parseInt(_0x340bcc(0x19f))/0xc*(-parseInt(_0x340bcc(0x1a0))/0xd);if(_0x565198===_0x27f30c)break;else _0x5481a9['push'](_0x5481a9['shift']());}catch(_0xb22974){_0x5481a9['push'](_0x5481a9['shift']());}}}(_0x1e8f,0xd90d7));import{ContextPlugin as _0x7cb44a}from'ckeditor5/src/core.js';function _0x1e8f(){const _0x1a21f5=['body','define','_handleUserRemove','[contenteditable]','_createView','render','Tab','45507192CrMBJe','13OjAZSk','2067791ETzCBX','requires','length','get','_handleUserAdd','listenTo','bind','tabIndex','attachToDom','querySelectorAll','[tabindex]','reverse','1902884TjCgxe','pin','add','allConnectedUsers','presenceList.displayMe','map','input','6OoRhfg','class','presencelist-collapseat-invalid-format','filter','isExpanded','unpin','isCollapsed','258815mUQOox','isMe','inlineListView','remove','presenceList.container','appendChild','_bodyCollection','Shift+Tab','config','execute','3sNGvVh','textarea','button','locale','join','counterView','onClick','min','2xSKKfw','hideDropdown','set','sort','using','ck\x20ck-presence-list__balloon','destroy','init','usersCount','element','displayMe','detachFromDom','select','255160qWlNIp','content','3656540RMuClP','balloonPanelView','keystrokes','currentDisplayedUsers','bindTo','_allConnectedUsers','showDropdown','isFocusable','view','isVisible','focus','indexOf','from','offsetHeight','12145903VAmJYU','plugins','isRendered','hasTooltip','items','presenceList.collapseAt','context','activeElement','isHidden','Enter','focusTracker','presencelist-missing-container','change:isFocused','presenceList','checkIfScrollable','number','9NyuaQS',':not([disabled]):not([tabindex=\x22-1\x22])','10BZuyjD','presenceDropdownView','offsetWidth','Esc'];_0x1e8f=function(){return _0x1a21f5;};return _0x1e8f();}import{CKEditorError as _0x559621,Collection as _0x822d96}from'ckeditor5/src/utils.js';import{clickOutsideHandler as _0xafcca7,BalloonPanelView as _0x3c286f,BodyCollection as _0x12ba70}from'ckeditor5/src/ui.js';import{isElement as _0x463bb7}from'lodash-es';import _0x18412f from'../realtimecollaborativeediting/sessions.js';import _0x5ec593 from'./view/presencelistview.js';function _0x287b(_0x233d95,_0x2e6508){const _0x1e8f96=_0x1e8f();return _0x287b=function(_0x287b2e,_0xcac332){_0x287b2e=_0x287b2e-0x13f;let _0x20ab76=_0x1e8f96[_0x287b2e];return _0x20ab76;},_0x287b(_0x233d95,_0x2e6508);}import _0x1db153 from'./view/presencedropdownlistview.js';import _0x4007c7 from'./view/presencedropdownlistitemview.js';import _0x30f86a from'./view/presenceinlinelistitemview.js';const A={'collapseAt':0x6,'displayMe':!0x0};export default class r extends _0x7cb44a{constructor(_0x10dc18){const _0x550496=_0x287b;super(_0x10dc18),this[_0x550496(0x159)]=null,this[_0x550496(0x188)][_0x550496(0x15b)][_0x550496(0x199)](_0x550496(0x18f),A);const _0x51d2d6=_0x10dc18[_0x550496(0x15b)][_0x550496(0x1a4)](_0x550496(0x187));if(_0x550496(0x191)!=typeof _0x51d2d6)throw new _0x559621(_0x550496(0x14e),this);if(_0x51d2d6<0x1)throw new _0x559621(_0x550496(0x14e),this);this[_0x550496(0x179)]=this[_0x550496(0x188)][_0x550496(0x183)][_0x550496(0x1a4)](_0x18412f)[_0x550496(0x148)],this[_0x550496(0x167)](_0x550496(0x16d),0x0),this[_0x550496(0x177)]=new _0x822d96(),this[_0x550496(0x175)]=new _0x3c286f(),this[_0x550496(0x175)][_0x550496(0x14d)]=_0x550496(0x16a),this[_0x550496(0x17c)]=this[_0x550496(0x19c)](),this[_0x550496(0x195)]=void 0x0;}static get[_0x1419d1(0x1a2)](){return[_0x18412f];}[_0x1419d1(0x16c)](){const _0x3397c0=_0x1419d1;for(const _0x18dfb3 of this[_0x3397c0(0x179)])this[_0x3397c0(0x1a5)](_0x18dfb3);this[_0x3397c0(0x1a6)](this[_0x3397c0(0x179)],_0x3397c0(0x147),(_0x488f0d,_0x2030c0)=>{const _0x5d8aa7=_0x3397c0;this[_0x5d8aa7(0x1a5)](_0x2030c0);}),this[_0x3397c0(0x1a6)](this[_0x3397c0(0x179)],_0x3397c0(0x156),(_0x300408,_0x1a089a)=>{const _0x2564ff=_0x3397c0;this[_0x2564ff(0x19a)](_0x1a089a);});}[_0x1419d1(0x19c)](){const _0x34299c=_0x1419d1,_0x1d549c=this[_0x34299c(0x188)],_0x53f296=new _0x5ec593(this[_0x34299c(0x188)][_0x34299c(0x160)]),_0x5a50f1=this[_0x34299c(0x175)];if(!_0x463bb7(_0x1d549c[_0x34299c(0x15b)][_0x34299c(0x1a4)](_0x34299c(0x157))))throw new _0x559621(_0x34299c(0x18d),this);return _0x53f296[_0x34299c(0x162)][_0x34299c(0x13f)](_0x34299c(0x16d))['to'](this),_0x53f296[_0x34299c(0x13f)](_0x34299c(0x152))['to'](this,_0x34299c(0x16d),_0x4c5624=>{const _0x3bf9b6=_0x34299c,{collapseAt:_0x3d29e1,displayMe:_0x202f88}=_0x1d549c[_0x3bf9b6(0x15b)][_0x3bf9b6(0x1a4)](_0x3bf9b6(0x18f)),_0x332b74=_0x4c5624>=_0x3d29e1;return _0x53f296[_0x3bf9b6(0x162)][_0x3bf9b6(0x18a)]=!(0x1==_0x4c5624&&_0x202f88||_0x332b74),_0x332b74||this[_0x3bf9b6(0x166)](),_0x332b74;}),_0x53f296[_0x34299c(0x155)][_0x34299c(0x186)][_0x34299c(0x178)](this[_0x34299c(0x177)])[_0x34299c(0x169)](_0x19dd64=>{const _0x28e377=_0x34299c,_0x4a3c14=_0x1d549c[_0x28e377(0x15b)][_0x28e377(0x1a4)](_0x28e377(0x18f)),_0x4ccf35=new _0x30f86a(_0x1d549c[_0x28e377(0x160)],_0x19dd64,!!_0x4a3c14[_0x28e377(0x163)]);return _0x4ccf35[_0x28e377(0x13f)](_0x28e377(0x185))['to'](_0x53f296,_0x28e377(0x152),_0x121d6b=>!_0x121d6b),_0x4ccf35[_0x28e377(0x13f)](_0x28e377(0x17b))['to'](_0x53f296,_0x28e377(0x152),_0x5bf10d=>!_0x5bf10d),_0x4a3c14[_0x28e377(0x163)]&&this[_0x28e377(0x1a6)](_0x4ccf35,_0x28e377(0x15c),()=>{const _0x351dfa=_0x28e377;this[_0x351dfa(0x17c)][_0x351dfa(0x152)]||_0x4a3c14[_0x351dfa(0x163)](_0x19dd64,_0x4ccf35[_0x351dfa(0x16e)]);}),_0x4ccf35;}),this[_0x34299c(0x1a6)](_0x53f296[_0x34299c(0x155)],_0x34299c(0x15c),()=>{const _0x1e5a69=_0x34299c;this[_0x1e5a69(0x195)]?this[_0x1e5a69(0x166)]():this[_0x1e5a69(0x17c)][_0x1e5a69(0x152)]&&this[_0x1e5a69(0x17a)]();}),_0x53f296[_0x34299c(0x155)][_0x34299c(0x176)][_0x34299c(0x167)](_0x34299c(0x18b),(_0x1ff277,_0x124821)=>{const _0x24c343=_0x34299c;this[_0x24c343(0x17c)][_0x24c343(0x152)]&&(this[_0x24c343(0x17a)](),_0x124821());}),_0x53f296[_0x34299c(0x19d)](),_0x5a50f1[_0x34299c(0x19d)](),_0xafcca7({'emitter':_0x53f296,'activator':()=>_0x5a50f1[_0x34299c(0x17d)],'contextElements':[_0x5a50f1[_0x34299c(0x16e)],_0x53f296[_0x34299c(0x155)][_0x34299c(0x16e)]],'callback':()=>this[_0x34299c(0x166)]()}),_0x1d549c[_0x34299c(0x15b)][_0x34299c(0x1a4)](_0x34299c(0x157))[_0x34299c(0x158)](_0x53f296[_0x34299c(0x16e)]),this[_0x34299c(0x159)]=new _0x12ba70(this[_0x34299c(0x188)][_0x34299c(0x160)]),this[_0x34299c(0x159)][_0x34299c(0x141)](),this[_0x34299c(0x159)][_0x34299c(0x147)](this[_0x34299c(0x175)]),_0x53f296;}[_0x1419d1(0x1a5)](_0xd50c28){const _0x327820=_0x1419d1;if(!this[_0x327820(0x188)][_0x327820(0x15b)][_0x327820(0x1a4)](_0x327820(0x149))&&_0xd50c28[_0x327820(0x154)])return;const _0x3a365a=this[_0x327820(0x188)][_0x327820(0x15b)][_0x327820(0x1a4)](_0x327820(0x187))-0x1;this[_0x327820(0x16d)]++,this[_0x327820(0x177)][_0x327820(0x1a3)]==_0x3a365a&&this[_0x327820(0x177)][_0x327820(0x1a3)]>0x1&&this[_0x327820(0x177)][_0x327820(0x156)](0x1);const _0x4f0959=_0xd50c28[_0x327820(0x154)]?0x0:this[_0x327820(0x177)][_0x327820(0x1a3)];this[_0x327820(0x177)][_0x327820(0x147)](_0xd50c28,_0x4f0959);}[_0x1419d1(0x19a)](_0x3d6f28){const _0x386c9e=_0x1419d1;if(this[_0x386c9e(0x16d)]--,this[_0x386c9e(0x177)][_0x386c9e(0x1a4)](_0x3d6f28['id'])&&(this[_0x386c9e(0x177)][_0x386c9e(0x156)](_0x3d6f28['id']),this[_0x386c9e(0x177)][_0x386c9e(0x1a3)]<this[_0x386c9e(0x16d)])){for(const _0x427ee0 of Array[_0x386c9e(0x180)](this[_0x386c9e(0x179)])[_0x386c9e(0x144)]())if(!this[_0x386c9e(0x177)][_0x386c9e(0x1a4)](_0x427ee0['id']))return void this[_0x386c9e(0x177)][_0x386c9e(0x147)](_0x427ee0,Math[_0x386c9e(0x164)](this[_0x386c9e(0x177)][_0x386c9e(0x1a3)],0x1));}}[_0x1419d1(0x17a)](){const _0x20ce4c=_0x1419d1;if(this[_0x20ce4c(0x195)])return;const _0x15aece=this[_0x20ce4c(0x188)][_0x20ce4c(0x15b)][_0x20ce4c(0x1a4)](_0x20ce4c(0x18f));this[_0x20ce4c(0x195)]=new _0x1db153(this[_0x20ce4c(0x188)][_0x20ce4c(0x160)],!!_0x15aece[_0x20ce4c(0x163)]),this[_0x20ce4c(0x17c)][_0x20ce4c(0x155)][_0x20ce4c(0x150)]=!0x0;const {listWrapperView:_0x58160a}=this[_0x20ce4c(0x195)];_0x58160a[_0x20ce4c(0x186)][_0x20ce4c(0x178)](this[_0x20ce4c(0x179)])[_0x20ce4c(0x169)](_0x129dc2=>{const _0x2f256a=_0x20ce4c;if(!_0x15aece[_0x2f256a(0x16f)]&&_0x129dc2[_0x2f256a(0x154)])return null;const _0x3ea848=new _0x4007c7(this[_0x2f256a(0x188)][_0x2f256a(0x160)],_0x129dc2,!!_0x15aece[_0x2f256a(0x163)]);return _0x15aece[_0x2f256a(0x163)]&&this[_0x2f256a(0x1a6)](_0x3ea848,_0x2f256a(0x15c),()=>{const _0x58b6b2=_0x2f256a;_0x15aece[_0x58b6b2(0x163)](_0x129dc2,_0x3ea848[_0x58b6b2(0x16e)]);}),_0x3ea848;}),this[_0x20ce4c(0x175)][_0x20ce4c(0x173)][_0x20ce4c(0x147)](this[_0x20ce4c(0x195)]),this[_0x20ce4c(0x175)][_0x20ce4c(0x146)]({'target':this[_0x20ce4c(0x17c)][_0x20ce4c(0x155)][_0x20ce4c(0x16e)]}),_0x58160a[_0x20ce4c(0x17e)](),_0x58160a[_0x20ce4c(0x190)]();const _0x1d4035=(_0x33a0c9,_0x5e913d)=>{const _0x31f331=_0x20ce4c;this[_0x31f331(0x166)](),this[_0x31f331(0x17c)][_0x31f331(0x155)][_0x31f331(0x17e)](),_0x5e913d();};_0x58160a[_0x20ce4c(0x176)][_0x20ce4c(0x167)](_0x20ce4c(0x197),_0x1d4035),_0x58160a[_0x20ce4c(0x176)][_0x20ce4c(0x167)](_0x20ce4c(0x15a),_0x1d4035),_0x58160a[_0x20ce4c(0x176)][_0x20ce4c(0x167)](_0x20ce4c(0x19e),(_0x3e78a1,_0x223c4a)=>{const _0x4b1994=_0x20ce4c;!function(_0x3d5761){const _0x3a0dc5=_0x287b,_0x3f8a6c=['a',_0x3a0dc5(0x15f),_0x3a0dc5(0x14b),_0x3a0dc5(0x171),_0x3a0dc5(0x15e),_0x3a0dc5(0x143),_0x3a0dc5(0x19b)][_0x3a0dc5(0x14a)](_0x2b8b11=>_0x2b8b11+_0x3a0dc5(0x193))[_0x3a0dc5(0x161)](','),_0x9576b3=[...document[_0x3a0dc5(0x198)][_0x3a0dc5(0x142)](_0x3f8a6c)][_0x3a0dc5(0x14f)](_0x3103dc=>_0x3103dc===document[_0x3a0dc5(0x189)]||_0x3103dc[_0x3a0dc5(0x196)]+_0x3103dc[_0x3a0dc5(0x181)]>0x0)[_0x3a0dc5(0x168)]((_0x588894,_0x17ca29)=>(_0x588894[_0x3a0dc5(0x140)]||0x0)-(_0x17ca29[_0x3a0dc5(0x140)]||0x0)),_0x37ec45=_0x9576b3[_0x3a0dc5(0x17f)](_0x3d5761),_0x1b0a74=_0x9576b3[(_0x37ec45+0x1)%_0x9576b3[_0x3a0dc5(0x1a3)]];_0x1b0a74&&_0x1b0a74[_0x3a0dc5(0x17e)]();}(this[_0x4b1994(0x17c)][_0x4b1994(0x16e)]),this[_0x4b1994(0x166)](),_0x223c4a();}),_0x58160a[_0x20ce4c(0x18c)][_0x20ce4c(0x147)](this[_0x20ce4c(0x17c)][_0x20ce4c(0x16e)]),_0x58160a[_0x20ce4c(0x18c)]['on'](_0x20ce4c(0x18e),(_0xcbaa8b,_0x2a4d67,_0x42c382)=>{const _0x2444d9=_0x20ce4c;_0x42c382||this[_0x2444d9(0x166)]();});}[_0x1419d1(0x166)](){const _0x391abc=_0x1419d1;this[_0x391abc(0x195)]&&(this[_0x391abc(0x17c)][_0x391abc(0x155)][_0x391abc(0x150)]=!0x1,this[_0x391abc(0x175)][_0x391abc(0x151)](),this[_0x391abc(0x175)][_0x391abc(0x173)][_0x391abc(0x156)](this[_0x391abc(0x195)]),this[_0x391abc(0x195)][_0x391abc(0x16b)](),this[_0x391abc(0x195)]=void 0x0);}[_0x1419d1(0x16b)](){const _0x62cc76=_0x1419d1;super[_0x62cc76(0x16b)](),this[_0x62cc76(0x17c)]&&this[_0x62cc76(0x17c)][_0x62cc76(0x184)]&&this[_0x62cc76(0x17c)][_0x62cc76(0x16b)](),this[_0x62cc76(0x159)]&&(this[_0x62cc76(0x159)][_0x62cc76(0x170)](),this[_0x62cc76(0x159)][_0x62cc76(0x16b)](),this[_0x62cc76(0x159)]=null);}}