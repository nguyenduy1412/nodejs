/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x3401cb=_0x31d7;(function(_0x4db5d8,_0x5eda0b){const _0x3f4d53=_0x31d7,_0x5f3f35=_0x4db5d8();while(!![]){try{const _0x28f3eb=-parseInt(_0x3f4d53(0x13b))/0x1*(-parseInt(_0x3f4d53(0x112))/0x2)+-parseInt(_0x3f4d53(0x100))/0x3*(-parseInt(_0x3f4d53(0x10d))/0x4)+-parseInt(_0x3f4d53(0x10a))/0x5*(parseInt(_0x3f4d53(0x10e))/0x6)+-parseInt(_0x3f4d53(0x114))/0x7*(-parseInt(_0x3f4d53(0xfb))/0x8)+parseInt(_0x3f4d53(0x115))/0x9*(parseInt(_0x3f4d53(0xed))/0xa)+parseInt(_0x3f4d53(0x130))/0xb+parseInt(_0x3f4d53(0x103))/0xc*(-parseInt(_0x3f4d53(0x146))/0xd);if(_0x28f3eb===_0x5eda0b)break;else _0x5f3f35['push'](_0x5f3f35['shift']());}catch(_0x31830e){_0x5f3f35['push'](_0x5f3f35['shift']());}}}(_0x3eb2,0x42214));import{Plugin as _0x363e0a}from'ckeditor5/src/core.js';import{version as _0x496c05}from'ckeditor5/src/utils.js';function _0x31d7(_0x3fc3d5,_0x23c648){const _0x3eb2d6=_0x3eb2();return _0x31d7=function(_0x31d7f7,_0x548e2f){_0x31d7f7=_0x31d7f7-0xe1;let _0xfbe4d2=_0x3eb2d6[_0x31d7f7];return _0xfbe4d2;},_0x31d7(_0x3fc3d5,_0x23c648);}import{Users as _0x1759ef}from'ckeditor5-collaboration/src/collaboration-core.js';import _0x4476bf from'../realtimecollaborativeediting/realtimecollaborationclient.js';import _0x42b204 from'../realtimecollaborativeediting/websocketgateway.js';import _0x195bb2 from'../realtimecollaborativeediting/sessions.js';import{EditorService as _0x2f2a34,RevisionHistoryService as _0x5c19fb,User as _0x41b841,WEB_SOCKET_GATEWAY_STATES as _0x251bd1}from'@ckeditor/ckeditor-cloud-services-collaboration/src/services.js';class u extends _0x363e0a{static get[_0x3401cb(0xf0)](){const _0x40e63c=_0x3401cb;return[_0x42b204,_0x4476bf,_0x40e63c(0x13d),_0x195bb2,_0x1759ef];}constructor(_0x3c4520){const _0x33104e=_0x3401cb;super(_0x3c4520);const _0xa917ad=this[_0x33104e(0x128)][_0x33104e(0x118)][_0x33104e(0x108)](_0x33104e(0x12e));this[_0x33104e(0x136)]=null,this[_0x33104e(0x11c)]=this[_0x33104e(0x128)][_0x33104e(0xe2)][_0x33104e(0x108)](_0x33104e(0x13d)),this[_0x33104e(0x147)]=new u[(_0x33104e(0x11d))](_0xa917ad);}async[_0x3401cb(0xf4)](){const _0x5a2b9a=_0x3401cb,_0x4289e8=this[_0x5a2b9a(0x128)][_0x5a2b9a(0xe2)][_0x5a2b9a(0x108)](_0x4476bf),_0x3cea5a=_0x4289e8[_0x5a2b9a(0xf8)],_0xe994e2=this[_0x5a2b9a(0x128)][_0x5a2b9a(0xe2)][_0x5a2b9a(0x108)](_0x42b204);this[_0x5a2b9a(0x11c)][_0x5a2b9a(0x11f)]({'history':_0x3cea5a,'getLatestVersion':()=>this[_0x5a2b9a(0x124)](),'getCurrentRevisionId':()=>_0x4289e8[_0x5a2b9a(0x106)]});const _0x433306=this[_0x5a2b9a(0x128)][_0x5a2b9a(0x118)][_0x5a2b9a(0x108)](_0x5a2b9a(0xec))||_0x496c05,_0x109d70=await _0x2f2a34[_0x5a2b9a(0x142)](_0xe994e2[_0x5a2b9a(0x12d)],_0x433306);this[_0x5a2b9a(0x11c)][_0x5a2b9a(0x144)]={'getRevision':async({revisionId:_0x23c68a})=>(await this[_0x5a2b9a(0xe5)](),await this[_0x5a2b9a(0x147)][_0x5a2b9a(0x13a)](_0x23c68a)),'updateRevisions':async _0x5f12e6=>{const _0x5c63dd=_0x5a2b9a;await this[_0x5c63dd(0xe5)]();const _0x2d4b1e=this[_0x5c63dd(0x11c)][_0x5c63dd(0x138)];if(_0x109d70&&0x1===_0x5f12e6[_0x5c63dd(0xf7)]&&_0x5f12e6[0x0]['id']===_0x2d4b1e['id'])return _0x5f12e6;for(const _0x4d8255 of _0x5f12e6)_0x4d8255['id']===_0x2d4b1e['id']&&(_0x4d8255[_0x5c63dd(0x117)]=_0x4d8255[_0x5c63dd(0x125)]===_0x4d8255[_0x5c63dd(0xfa)]);return this[_0x5c63dd(0x147)][_0x5c63dd(0x11a)](_0x5f12e6,this[_0x5c63dd(0x136)])[_0x5c63dd(0x135)](_0x439c50=>(this[_0x5c63dd(0x136)]=_0x439c50,_0x5f12e6))[_0x5c63dd(0x151)](_0x4f4ec5=>{const _0x4b0e82=_0x5c63dd;if(P(_0x4f4ec5)||_0x4b0e82(0x129)===_0x4f4ec5[_0x4b0e82(0x119)]&&void 0x0!==_0x4f4ec5[_0x4b0e82(0x145)][_0x4b0e82(0x121)]){for(const _0x2c7145 of _0x5f12e6){!this[_0x4b0e82(0x11c)][_0x4b0e82(0xfc)][_0x4b0e82(0x13a)](_0x2c7145['id'])||this[_0x4b0e82(0x11c)][_0x4b0e82(0x10c)](_0x2c7145['id'],_0x2c7145,!0x1);}if(P(_0x4f4ec5))throw _0x4f4ec5;return _0x5f12e6;}throw _0x4f4ec5;});}},this[_0x5a2b9a(0xe8)](this[_0x5a2b9a(0x147)],_0x5a2b9a(0x14c),(_0x7f5388,{revisionsData:_0x54e91b,requestId:_0x3f84b4})=>{const _0x3466dc=_0x5a2b9a;Math[_0x3466dc(0xe9)](..._0x54e91b[_0x3466dc(0x105)](_0x1a93b6=>_0x1a93b6[_0x3466dc(0xfa)]))>this[_0x3466dc(0x132)]()-0x1?this[_0x3466dc(0x124)]()[_0x3466dc(0x135)](()=>{const _0x1edbab=_0x3466dc;this[_0x1edbab(0x143)](_0x54e91b,_0x3f84b4);}):this[_0x3466dc(0x143)](_0x54e91b,_0x3f84b4);});const {revisions:_0x530abd,requestId:_0x2adc61}=await this[_0x5a2b9a(0x147)][_0x5a2b9a(0x122)](_0xe994e2[_0x5a2b9a(0x12d)]);_0xe994e2[_0x5a2b9a(0x14e)](this),this[_0x5a2b9a(0x136)]=_0x2adc61,await this[_0x5a2b9a(0xe1)](_0x530abd);for(const _0x568962 of _0x530abd)this[_0x5a2b9a(0x11c)][_0x5a2b9a(0x137)](_0x568962);this[_0x5a2b9a(0xe8)](_0x4289e8,_0x5a2b9a(0xf5),(_0x5316d2,_0x451ac,_0x57168b)=>{const _0x5cb71c=_0x5a2b9a;_0x57168b&&(this[_0x5cb71c(0xf2)]=_0x4289e8[_0x5cb71c(0x10b)],_0x5316d2[_0x5cb71c(0x14f)]());}),this[_0x5a2b9a(0x11c)][_0x5a2b9a(0xfe)](_0x5a2b9a(0xe6))['to'](_0xe994e2,_0x5a2b9a(0x14d),_0x1c7c37=>_0x1c7c37===_0x251bd1[_0x5a2b9a(0x127)]);}async[_0x3401cb(0x131)](){const _0xd3d900=_0x3401cb,_0x47c3ec=this[_0xd3d900(0x128)][_0xd3d900(0xe2)][_0xd3d900(0x108)](_0x42b204),_0x4e02a2=this[_0xd3d900(0x128)][_0xd3d900(0xe2)][_0xd3d900(0x108)](_0x4476bf),_0x5dec43=async()=>{const _0xc60e17=_0xd3d900,_0x2aec99=this[_0xc60e17(0x11c)][_0xc60e17(0x138)],_0x45c2bc=_0x2aec99['id'],_0x456b43=_0x45c2bc!==_0x4e02a2[_0xc60e17(0x106)];if(_0x456b43){const _0x2a252b=_0x4e02a2[_0xc60e17(0x10b)]-this[_0xc60e17(0xf2)],_0x350c48=this[_0xc60e17(0x132)]();this[_0xc60e17(0x11c)][_0xc60e17(0x123)][_0xc60e17(0x126)]();if(_0x2aec99[_0xc60e17(0xfa)]+_0x2a252b!==_0x350c48){const _0x385e3d=_0x2aec99[_0xc60e17(0x125)]+_0x2a252b,_0x1aa50c=this[_0xc60e17(0x128)][_0xc60e17(0xe2)][_0xc60e17(0x108)](_0x1759ef),_0x2b2faa=this[_0xc60e17(0x11c)][_0xc60e17(0x12c)]({'revision':_0x2aec99,'from':_0x385e3d,'to':_0x350c48});_0x2b2faa['id']=_0x2aec99['id'];const _0x4403c9=_0x2b2faa[_0xc60e17(0x13c)][_0xc60e17(0x105)](_0x13f2d5=>_0x1aa50c[_0xc60e17(0xe3)](_0x13f2d5));_0x2aec99[_0xc60e17(0x14b)]({..._0x2b2faa,'authors':_0x4403c9},!0x0),this[_0xc60e17(0x11c)][_0xc60e17(0x10c)](_0x2aec99['id'],_0x2b2faa,!0x0);}this[_0xc60e17(0x11c)][_0xc60e17(0xff)]=_0x350c48,(_0x2aec99[_0xc60e17(0xfa)]===_0x2aec99[_0xc60e17(0x125)]&&!this[_0xc60e17(0x11c)][_0xc60e17(0xf9)][_0xc60e17(0x10f)](_0x45c2bc)&&this[_0xc60e17(0x11c)][_0xc60e17(0xfc)][_0xc60e17(0x148)][_0xc60e17(0x102)](_0x45c2bc),this[_0xc60e17(0x11c)][_0xc60e17(0xfd)](_0x350c48));}const {revisions:_0x57c9a2,requestId:_0x515bad}=await this[_0xc60e17(0x147)][_0xc60e17(0x131)](_0x47c3ec[_0xc60e17(0x12d)],this[_0xc60e17(0x136)]);_0x456b43&&_0x57c9a2[_0xc60e17(0xf7)]>0x0?_0x4e02a2[_0xc60e17(0x139)]():(await this[_0xc60e17(0xe1)](_0x57c9a2),this[_0xc60e17(0x143)](_0x57c9a2,_0x515bad),this[_0xc60e17(0x11c)][_0xc60e17(0x101)]());};return _0x4e02a2[_0xd3d900(0xea)]?_0x5dec43():new Promise((_0x278acb,_0xcb856b)=>{const _0x20a20c=_0xd3d900;_0x4e02a2[_0x20a20c(0x104)](_0x20a20c(0xf5),()=>{const _0x276b0a=_0x20a20c;_0x5dec43()[_0x276b0a(0x135)](_0x278acb)[_0x276b0a(0x151)](_0xcb856b);});});}[_0x3401cb(0x111)](){const _0x2de518=_0x3401cb;super[_0x2de518(0x111)]();}async[_0x3401cb(0xe5)](){const _0x52717a=_0x3401cb;this[_0x52717a(0x147)][_0x52717a(0x152)]||await new Promise(_0x1f681e=>{const _0x5de323=_0x52717a;this[_0x5de323(0xe8)](this[_0x5de323(0x147)],_0x5de323(0x140),_0x4e928e=>{const _0x31e29e=_0x5de323;_0x4e928e[_0x31e29e(0x14f)](),_0x1f681e();});});}[_0x3401cb(0x132)](){const _0xe40145=_0x3401cb,_0x591ada=this[_0xe40145(0x128)][_0xe40145(0xe2)][_0xe40145(0x108)](_0x4476bf)[_0xe40145(0xf8)][_0xe40145(0xe4)]()[_0xe40145(0x12a)]();for(const _0x2f5fa8 of _0x591ada)if(_0xe40145(0x141)!==_0x2f5fa8[_0xe40145(0x12f)]||_0x2f5fa8[_0xe40145(0x149)])return _0x2f5fa8[_0xe40145(0xeb)]+0x1;}[_0x3401cb(0x124)](){const _0x41949e=_0x3401cb,_0x1fa62e=this[_0x41949e(0x128)][_0x41949e(0xe2)][_0x41949e(0x108)](_0x4476bf);return new Promise(_0x2e62bc=>{const _0x41f472=_0x41949e;_0x1fa62e[_0x41f472(0x150)]?_0x1fa62e[_0x41f472(0x104)](_0x41f472(0xee),()=>{const _0x4f379b=_0x41f472;_0x2e62bc(this[_0x4f379b(0x132)]());}):_0x2e62bc(this[_0x41f472(0x132)]());});}[_0x3401cb(0x143)](_0x68be60,_0x4b6404){const _0x1483af=_0x3401cb,_0x15bdba=this[_0x1483af(0x11c)][_0x1483af(0xfc)];this[_0x1483af(0x136)]=_0x4b6404;for(const _0x32ef1b of _0x68be60){const _0x4d0b48=_0x15bdba[_0x1483af(0x13a)](_0x32ef1b['id']);if(_0x4d0b48){if((_0x32ef1b[_0x1483af(0x125)]||_0x32ef1b[_0x1483af(0xfa)])&&(_0x32ef1b[_0x1483af(0x11e)]=null),_0x4d0b48===this[_0x1483af(0x11c)][_0x1483af(0x138)]){const _0x3fcbef=Math[_0x1483af(0xe9)](_0x4d0b48[_0x1483af(0xfa)],_0x32ef1b[_0x1483af(0xfa)]),_0x1b977b=Math[_0x1483af(0xe9)](_0x4d0b48[_0x1483af(0x125)],_0x32ef1b[_0x1483af(0x125)]);let _0x59560e;_0x4d0b48[_0x1483af(0xfa)]===_0x32ef1b[_0x1483af(0xfa)]&&_0x4d0b48[_0x1483af(0x125)]===_0x32ef1b[_0x1483af(0x125)]?(_0x59560e=!0x0,this[_0x1483af(0x13f)](_0x32ef1b)):_0x32ef1b[_0x1483af(0xfa)]===_0x3fcbef&&_0x32ef1b[_0x1483af(0x125)]===_0x1b977b?_0x59560e=!0x1:(_0x4d0b48[_0x1483af(0xfa)]===_0x3fcbef&&_0x4d0b48[_0x1483af(0x125)]===_0x1b977b||this[_0x1483af(0xf1)]({'revision':_0x4d0b48,'from':_0x1b977b,'to':_0x3fcbef}),_0x59560e=!0x0),_0x59560e&&(delete _0x32ef1b[_0x1483af(0x125)],delete _0x32ef1b[_0x1483af(0xfa)],delete _0x32ef1b[_0x1483af(0x11e)],delete _0x32ef1b[_0x1483af(0x110)],delete _0x32ef1b[_0x1483af(0x13c)]);}this[_0x1483af(0x11c)][_0x1483af(0x133)](_0x32ef1b),this[_0x1483af(0x13f)](_0x32ef1b);}else this[_0x1483af(0x11c)][_0x1483af(0x137)](_0x32ef1b);}const _0x48d27e=_0x15bdba[_0x1483af(0x109)]();_0x48d27e[_0x1483af(0x12a)]();for(let _0x5a1ac0=0x0;_0x5a1ac0<_0x48d27e[_0x1483af(0xf7)]-0x1;_0x5a1ac0++){const _0x29cd86=_0x48d27e[_0x5a1ac0],_0x1ee296=_0x48d27e[_0x5a1ac0+0x1];if(_0x29cd86[_0x1483af(0x125)]<_0x1ee296[_0x1483af(0xfa)]){const _0x992927=_0x1ee296[_0x1483af(0xfa)],_0xd8f0c6=Math[_0x1483af(0xe9)](_0x992927,_0x29cd86[_0x1483af(0xfa)]);this[_0x1483af(0xf1)]({'revision':_0x29cd86,'from':_0x992927,'to':_0xd8f0c6});}}}[_0x3401cb(0xf1)]({revision:_0x4236f3,from:_0x4926b9,to:_0x3b87a5}={}){const _0x1c255a=_0x3401cb,_0x1731a1=this[_0x1c255a(0x128)][_0x1c255a(0xe2)][_0x1c255a(0x108)](_0x1759ef),_0x37c31f=this[_0x1c255a(0x11c)][_0x1c255a(0x12c)]({'revision':_0x4236f3,'from':_0x4926b9,'to':_0x3b87a5});_0x37c31f[_0x1c255a(0x134)]=_0x37c31f[_0x1c255a(0x13c)][_0x1c255a(0x105)](_0x204d82=>_0x1731a1[_0x1c255a(0xe3)](_0x204d82)),_0x4236f3[_0x1c255a(0x14b)](_0x37c31f);}[_0x3401cb(0x13f)](_0x49e015){const _0x4e81f7=_0x3401cb,_0x5c62a1={};_0x5c62a1['id']=_0x49e015['id'];for(const _0x1c0802 of Object[_0x4e81f7(0x13e)](_0x49e015))'id'!==_0x1c0802&&(_0x5c62a1[_0x1c0802]=void 0x0);this[_0x4e81f7(0x11c)][_0x4e81f7(0x10c)](_0x5c62a1['id'],_0x5c62a1,!0x0);}async[_0x3401cb(0xe1)](_0x12af96){const _0x2c8abf=_0x3401cb,_0xb6c38c=this[_0x2c8abf(0x128)][_0x2c8abf(0xe2)][_0x2c8abf(0x108)](_0x1759ef),{connection:_0x5b5eca}=this[_0x2c8abf(0x128)][_0x2c8abf(0xe2)][_0x2c8abf(0x108)](_0x42b204),_0x2be422=new Set();for(const _0x57c50f of _0x12af96){for(const _0x5a0026 of _0x57c50f[_0x2c8abf(0x13c)])_0x57f371(_0x5a0026);_0x57c50f[_0x2c8abf(0x120)]&&_0x57f371(_0x57c50f[_0x2c8abf(0x120)]);}if(0x0===_0x2be422[_0x2c8abf(0x113)])return;const _0x544923=await _0x41b841[_0x2c8abf(0x107)](_0x5b5eca,Array[_0x2c8abf(0xe7)](_0x2be422));for(const _0xa690cc of _0x544923)_0xb6c38c[_0x2c8abf(0xe3)](_0xa690cc['id'])||_0xb6c38c[_0x2c8abf(0xf6)](_0xa690cc);function _0x57f371(_0x22c83a){const _0x589939=_0x2c8abf;_0xb6c38c[_0x589939(0xe3)](_0x22c83a)||_0x2be422[_0x589939(0x12b)](_0x22c83a);}}}function _0x3eb2(){const _0x4ba243=['affectsData','cloud-services-internal-error:\x20Revision\x20History\x20Service\x20is\x20not\x20connected.','_update','revisionsUpdated','state','addToReconnectionStack','off','_isPendingUpdate','catch','isConnected','_fetchMissingUsers','plugins','getUser','getOperations','_waitForServiceReady','isEnabled','from','listenTo','max','_isConnected','baseVersion','cloudServices.bundleVersion','220VgBBxc','change:_isPendingUpdate','cloud-services-internal-error:\x20Not\x20connected.','requires','_fixRevision','_oldOffset','message','init','change:_isConnected','addUser','length','serverHistory','_bufferedUpdates','toVersion','46808afTvEC','repository','_createCurrentRevision','bind','_startingVersion','147621bWoZiH','sendBufferedUpdates','remove','264yqLSYw','once','map','sessionId','getMany','get','getRevisions','5Saniwq','_offset','_bufferUpdate','12CuXhKG','3070278eLpCNV','has','createdAt','destroy','1878OiwFDC','size','385qrisrx','21303CnkiQG','cloud-services-internal-error:\x20Request\x20timeout.','isEmptyCurrent','config','code','updateRevisions','startsWith','_revisionTracker','RevisionHistoryService','diffData','setSource','creatorId','wrongRequestId','connect','_revisionDataBuilder','_getLatestVersion','fromVersion','reInit','CONNECTED','editor','400','reverse','add','buildRevisionData','connection','collaboration.channelId','type','4055689XiaHza','reconnect','_getLatestVersionFromServerOperations','setRevisionData','authors','then','_lastRequestId','addRevisionData','currentRevision','_handleReconnectionError','getRevision','436hZiedp','authorsIds','RevisionTracker','keys','_preventResendingRevisionData','connected','marker','isBundleUploaded','_handleRevisionsUpdate','adapter','data','305513NrIRge','_revisionHistoryService','_revisions'];_0x3eb2=function(){return _0x4ba243;};return _0x3eb2();}u[_0x3401cb(0x11d)]=_0x5c19fb;export default u;function P(_0x200081){const _0x5b76fa=_0x3401cb;return _0x200081[_0x5b76fa(0xf3)][_0x5b76fa(0x11b)](_0x5b76fa(0x14a))||_0x200081[_0x5b76fa(0xf3)][_0x5b76fa(0x11b)](_0x5b76fa(0xef))||_0x200081[_0x5b76fa(0xf3)][_0x5b76fa(0x11b)](_0x5b76fa(0x116));}