/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
function _0x4199(){const _0x2c8fe8=['adapter','addToReconnectionStack','then','connection','reconnect','_trackChangesService','config','476129TLKqdv','511932nggdMI','2pewWeS','requires','_bufferedRequests','2310420akADnS','addSuggestionData','connect','getSuggestion','8623740vSGruo','hasSuggestion','getMany','cloud-services-internal-error:\x20Not\x20connected.','4iqpRih','catch','update','544687cyIxxn','_saved','init','find','cloud-services-internal-error:\x20Request\x20timeout.','startsWith','getUser','data','2421390wwcXuB','16261qkirlv','get','open','2768WotjGp','_fetchMissingUsersForThreads','attributes','off','state','message','TrackChangesService','size','type','isConnected','connected','from','editor','plugins','originalSuggestionId','add','suggestionUpdated','9VRntEu','TrackChangesEditing','values','addUser','collaboration.channelId','listenTo','_waitForServiceReady','delete','set'];_0x4199=function(){return _0x2c8fe8;};return _0x4199();}const _0xc23ae5=_0x2fd7;(function(_0x41de52,_0x1136bd){const _0x1d69af=_0x2fd7,_0x1df310=_0x41de52();while(!![]){try{const _0x5b1ab5=-parseInt(_0x1d69af(0x13d))/0x1*(-parseInt(_0x1d69af(0x13f))/0x2)+-parseInt(_0x1d69af(0x13e))/0x3*(parseInt(_0x1d69af(0x10d))/0x4)+parseInt(_0x1d69af(0x105))/0x5+-parseInt(_0x1d69af(0x118))/0x6+parseInt(_0x1d69af(0x119))/0x7*(-parseInt(_0x1d69af(0x11c))/0x8)+-parseInt(_0x1d69af(0x12d))/0x9*(-parseInt(_0x1d69af(0x109))/0xa)+parseInt(_0x1d69af(0x110))/0xb;if(_0x5b1ab5===_0x1136bd)break;else _0x1df310['push'](_0x1df310['shift']());}catch(_0x4b36ff){_0x1df310['push'](_0x1df310['shift']());}}}(_0x4199,0x73449));import{Plugin as _0x3148db}from'ckeditor5/src/core.js';import{User as _0x576d2d,TrackChangesService as _0x5cf1e6}from'@ckeditor/ckeditor-cloud-services-collaboration/src/services.js';import _0xda0607 from'../realtimecollaborativeediting/websocketgateway.js';import _0x1d8dd2 from'../realtimecollaborativecomments/cloudservicescommentsadapter.js';import{Users as _0x4dd8a2}from'ckeditor5-collaboration/src/collaboration-core.js';class f extends _0x3148db{static get[_0xc23ae5(0x140)](){const _0x1c3261=_0xc23ae5;return[_0x1d8dd2,_0x1c3261(0x12e),_0xda0607];}constructor(_0x30b52a){const _0x15925a=_0xc23ae5;super(_0x30b52a);const _0x42e842=this[_0x15925a(0x128)][_0x15925a(0x13c)][_0x15925a(0x11a)](_0x15925a(0x131));this[_0x15925a(0x141)]=new Map(),this[_0x15925a(0x13b)]=new f[(_0x15925a(0x122))](_0x42e842);}[_0xc23ae5(0x112)](){const _0x486f43=_0xc23ae5,_0x3a8934=this[_0x486f43(0x128)][_0x486f43(0x129)][_0x486f43(0x11a)](_0xda0607),_0x4fd3f8=this[_0x486f43(0x128)][_0x486f43(0x129)][_0x486f43(0x11a)](_0x486f43(0x12e));return _0x4fd3f8[_0x486f43(0x136)]={'getSuggestion':async _0x3ab92a=>{const _0x32b6c6=_0x486f43;await this[_0x32b6c6(0x133)]();const _0x427102=await this[_0x32b6c6(0x13b)][_0x32b6c6(0x11a)](_0x3ab92a)[_0x32b6c6(0x10e)](R);return await this[_0x32b6c6(0x11d)]([_0x427102]),_0x427102;},'addSuggestion':async({id:_0xa9d02b,type:_0x534754,data:_0x21259d,originalSuggestionId:_0x18da6f,attributes:_0x2afe3d})=>{const _0x2b30b0=_0x486f43;await this[_0x2b30b0(0x133)]();const _0x52fe96={'id':_0xa9d02b,'type':_0x534754,'data':_0x21259d,'originalSuggestionId':_0x18da6f,'attributes':_0x2afe3d},_0x25120f=await this[_0x2b30b0(0x13b)][_0x2b30b0(0x12b)](_0xa9d02b,_0x534754,_0x21259d,_0x18da6f,_0x2afe3d)[_0x2b30b0(0x10e)](_0x3e1631=>{if(P(_0x3e1631))return new Promise(_0xcac217=>{const _0x5b89d2=_0x2fd7;this[_0x5b89d2(0x141)][_0x5b89d2(0x135)](_0xa9d02b,{'resolve':_0xcac217,'suggestionData':_0x52fe96});});throw _0x3e1631;});return this[_0x2b30b0(0x141)][_0x2b30b0(0x134)](_0xa9d02b),_0x25120f;},'updateSuggestion':async(_0x520c26,_0x59a44d)=>{const _0x1d238f=_0x486f43;if(await this[_0x1d238f(0x133)](),_0x1d238f(0x11b)!==_0x59a44d[_0x1d238f(0x120)])return this[_0x1d238f(0x13b)][_0x1d238f(0x10f)](_0x520c26,_0x59a44d)[_0x1d238f(0x10e)](R);}},this[_0x486f43(0x132)](this[_0x486f43(0x13b)],_0x486f43(0x12c),(_0x36e100,_0x53dda1)=>{const _0x4ad027=_0x486f43;_0x4fd3f8[_0x4ad027(0x10a)](_0x53dda1['id'])&&(_0x4fd3f8[_0x4ad027(0x108)](_0x53dda1['id'])[_0x4ad027(0x11e)]=_0x53dda1[_0x4ad027(0x11e)]);}),this[_0x486f43(0x13b)][_0x486f43(0x107)](_0x3a8934[_0x486f43(0x139)])[_0x486f43(0x138)](_0x5d0be3=>(_0x3a8934[_0x486f43(0x137)](this),this[_0x486f43(0x11d)](_0x5d0be3)[_0x486f43(0x138)](()=>{const _0x35c6b7=_0x486f43;for(const _0x5c4dea of _0x5d0be3){_0x4fd3f8[_0x35c6b7(0x106)](_0x5c4dea)[_0x35c6b7(0x111)]=!0x0;}})));}async[_0xc23ae5(0x13a)](){const _0x1ca5f8=_0xc23ae5,_0x5c4967=this[_0x1ca5f8(0x128)][_0x1ca5f8(0x129)][_0x1ca5f8(0x11a)](_0x1ca5f8(0x12e)),{connection:_0xc81eae}=this[_0x1ca5f8(0x128)][_0x1ca5f8(0x129)][_0x1ca5f8(0x11a)](_0xda0607),_0x3a10a9=await this[_0x1ca5f8(0x13b)][_0x1ca5f8(0x107)](_0xc81eae);await this[_0x1ca5f8(0x11d)](_0x3a10a9);for(const {suggestionData:_0x25dc5a,resolve:_0xfec402}of this[_0x1ca5f8(0x141)][_0x1ca5f8(0x12f)]()){let _0x4e3e0e=_0x3a10a9[_0x1ca5f8(0x113)](_0x1e3dca=>_0x1e3dca['id']===_0x25dc5a['id']);_0x4e3e0e||(_0x4e3e0e=await this[_0x1ca5f8(0x13b)][_0x1ca5f8(0x12b)](_0x25dc5a['id'],_0x25dc5a[_0x1ca5f8(0x124)],_0x25dc5a[_0x1ca5f8(0x117)],_0x25dc5a[_0x1ca5f8(0x12a)])),_0xfec402(_0x4e3e0e);}for(const _0x582a55 of _0x3a10a9)_0x5c4967[_0x1ca5f8(0x10a)](_0x582a55['id'])||_0x5c4967[_0x1ca5f8(0x106)](_0x582a55);}async[_0xc23ae5(0x133)](){const _0x47488e=_0xc23ae5;this[_0x47488e(0x13b)][_0x47488e(0x125)]||await new Promise(_0x3d7dbd=>{const _0x4dfbcb=_0x47488e;this[_0x4dfbcb(0x132)](this[_0x4dfbcb(0x13b)],_0x4dfbcb(0x126),_0x3237b3=>{const _0x8b9b4=_0x4dfbcb;_0x3237b3[_0x8b9b4(0x11f)](),_0x3d7dbd();});});}async[_0xc23ae5(0x11d)](_0x3fe620){const _0x5e7624=_0xc23ae5,_0x3318cd=this[_0x5e7624(0x128)][_0x5e7624(0x129)][_0x5e7624(0x11a)](_0x4dd8a2),{connection:_0xcf8652}=this[_0x5e7624(0x128)][_0x5e7624(0x129)][_0x5e7624(0x11a)](_0xda0607),_0x1c6997=new Set();for(const {authorId:_0x553311}of _0x3fe620)_0x3318cd[_0x5e7624(0x116)](_0x553311)||_0x1c6997[_0x5e7624(0x12b)](_0x553311);if(0x0===_0x1c6997[_0x5e7624(0x123)])return;const _0x2a44c3=await _0x576d2d[_0x5e7624(0x10b)](_0xcf8652,Array[_0x5e7624(0x127)](_0x1c6997));for(const _0x3122f7 of _0x2a44c3)_0x3318cd[_0x5e7624(0x116)](_0x3122f7['id'])||_0x3318cd[_0x5e7624(0x130)](_0x3122f7);}}f[_0xc23ae5(0x122)]=_0x5cf1e6;function _0x2fd7(_0x39b591,_0xd01d4f){const _0x41995d=_0x4199();return _0x2fd7=function(_0x2fd77c,_0x3d4781){_0x2fd77c=_0x2fd77c-0x105;let _0x1376b1=_0x41995d[_0x2fd77c];return _0x1376b1;},_0x2fd7(_0x39b591,_0xd01d4f);}export default f;function R(_0x19c608){if(P(_0x19c608))return new Promise(()=>{});throw _0x19c608;}function P(_0x3f4ce9){const _0x40bd46=_0xc23ae5;return _0x3f4ce9[_0x40bd46(0x121)][_0x40bd46(0x115)](_0x40bd46(0x10c))||_0x3f4ce9[_0x40bd46(0x121)][_0x40bd46(0x115)](_0x40bd46(0x114));}