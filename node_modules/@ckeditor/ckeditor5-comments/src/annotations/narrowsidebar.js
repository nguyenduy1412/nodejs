/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x380ebc=_0x3aba;(function(_0x398c80,_0x313d77){const _0x3cfd8f=_0x3aba,_0x4477c7=_0x398c80();while(!![]){try{const _0x52febf=-parseInt(_0x3cfd8f(0xa8))/0x1+-parseInt(_0x3cfd8f(0xa7))/0x2*(-parseInt(_0x3cfd8f(0xc8))/0x3)+-parseInt(_0x3cfd8f(0x105))/0x4*(parseInt(_0x3cfd8f(0x9b))/0x5)+parseInt(_0x3cfd8f(0xd5))/0x6+-parseInt(_0x3cfd8f(0xe3))/0x7*(parseInt(_0x3cfd8f(0xc3))/0x8)+parseInt(_0x3cfd8f(0xc5))/0x9*(-parseInt(_0x3cfd8f(0xa0))/0xa)+parseInt(_0x3cfd8f(0x106))/0xb*(parseInt(_0x3cfd8f(0x102))/0xc);if(_0x52febf===_0x313d77)break;else _0x4477c7['push'](_0x4477c7['shift']());}catch(_0x4dc225){_0x4477c7['push'](_0x4477c7['shift']());}}}(_0x56e7,0xca865));import{ContextPlugin as _0x4bb000,Context as _0x33f5ac}from'ckeditor5/src/core.js';import _0x1a05d4 from'./annotationsuis.js';import _0x4cec24 from'./sidebar.js';function _0x56e7(){const _0x4cb85f=['northArrowSouthWest','_manuallyClosedAnnotationViews','activeAnnotation','isPremiumPlugin','_detachFromContainer','attach','find','EditorAnnotations','annotationType','stopPropagation','editors','35sdfela','_hideBalloon','includes','low','values','2063770nCgVYn','clear','bind','narrowsidebar-attach-already-attached','northArrowSouth','_setSelectedAnnotations','southArrowNorthEast','90AuwVTq','1299743XaixxA','hasDomSelection','delete','narrowSidebar','has','_refreshPositioning','get','listenTo','getByView','view','ready','_detachListeners','create','unpin','keydown','stopListening','_destroyEditorAnnotationsIntegration','requires','detach','_editorAnnotations','number','set','keyCode','detachFromDom','resize','attachToDom','change:height','152ssDIYV','isOfficialPlugin','72AWsmWd','preventDefault','_showBalloon','17232XqrGTC','focus','off','pin','contains','_selectedAnnotations','Esc','addEventListener','init','narrowsidebar-detach-not-attached','_annotationToNarrowView','refreshPositioning','mousedown','3621078ENqeaM','isVisible','annotations','high','esc','cancel','_attachToContainer','remove','removeEventListener','uiUpdate','preventClosingBalloon','isDirty','first','ck-sidebar--narrow','231742ylnsai','_domEmitter','_attachListeners','_refreshPositioningDebounced','focusableElements','set:container','change:container','isAttached','execute','balloonPanelView','defaultPositions','NarrowSidebar','from','pluginName','destroy','southArrowNorth','setActiveAnnotation','content','length','_integrateWithEditorAnnotations','_updateBalloonPosition','southArrowNorthWest','locale','add','element','_annotations','northArrowSouthEast','register','target','getSidebarItemView','getOrderedSelectedAnnotations','307092fHlGlw','plugins','rearrange','517436VDXUEC','1914QMWzKo','blur','refresh','context','stop','type','addAnnotation','bodyCollection'];_0x56e7=function(){return _0x4cb85f;};return _0x56e7();}import _0x42281e from'./view/annotationcounterbuttonview.js';import{BalloonPanelView as _0x29a7a0,BodyCollection as _0x46a62c}from'ckeditor5/src/ui.js';import{CKEditorError as _0x561e27,DomEmitterMixin as _0x29bd3c,keyCodes as _0x2ece36,Collection as _0x123ba5}from'ckeditor5/src/utils.js';function _0x3aba(_0x3b8cc9,_0x47a679){const _0x56e798=_0x56e7();return _0x3aba=function(_0x3aba85,_0x401426){_0x3aba85=_0x3aba85-0x93;let _0x5ce95a=_0x56e798[_0x3aba85];return _0x5ce95a;},_0x3aba(_0x3b8cc9,_0x47a679);}import'../../theme/sidebar-narrow.css';import{debounce as _0x44abc4}from'lodash-es';export default class n extends _0x4bb000{static get[_0x380ebc(0xb9)](){return[_0x4cec24,_0x1a05d4];}static get[_0x380ebc(0xf0)](){const _0x12ff06=_0x380ebc;return _0x12ff06(0xee);}static get[_0x380ebc(0xc4)](){return!0x0;}static get[_0x380ebc(0x93)](){return!0x0;}constructor(_0x1b517e){const _0x3311dc=_0x380ebc;super(_0x1b517e),this[_0x3311dc(0xea)]=!0x1,this[_0x3311dc(0x10f)]=new Set(),this[_0x3311dc(0xe4)]=Object[_0x3311dc(0xb4)](_0x29bd3c),this[_0x3311dc(0xd2)]=new Map(),this[_0x3311dc(0xbd)](_0x3311dc(0x110),null),this[_0x3311dc(0xd7)]=null,this[_0x3311dc(0xcd)]=[],this[_0x3311dc(0xbb)]=new _0x123ba5(),this[_0x3311dc(0xe6)]=_0x44abc4(()=>{const _0x12df93=_0x3311dc;this[_0x12df93(0xad)]();},0xfa,{'leading':!0x1});}[_0x380ebc(0xd0)](){const _0x2f4671=_0x380ebc;this[_0x2f4671(0x109)][_0x2f4671(0x103)][_0x2f4671(0xae)](_0x1a05d4)[_0x2f4671(0xfe)](_0x2f4671(0xab),this),this[_0x2f4671(0x10d)]=new _0x46a62c(this[_0x2f4671(0x109)][_0x2f4671(0xf9)]),this[_0x2f4671(0xec)]=new _0x29a7a0(this[_0x2f4671(0x109)][_0x2f4671(0xf9)]),this[_0x2f4671(0x10d)][_0x2f4671(0xc1)](),this[_0x2f4671(0x10d)][_0x2f4671(0xfa)](this[_0x2f4671(0xec)]);}[_0x380ebc(0x95)](_0x7b1f0a){const _0x2e4afe=_0x380ebc;this[_0x2e4afe(0xd7)]=_0x7b1f0a;const _0xbd7752=this[_0x2e4afe(0x109)][_0x2e4afe(0x103)][_0x2e4afe(0xae)](_0x4cec24),_0x5abf7e=this[_0x2e4afe(0xec)];if(_0xbd7752[_0x2e4afe(0xfc)]=_0x7b1f0a,this[_0x2e4afe(0xea)])throw new _0x561e27(_0x2e4afe(0xa3),this);this[_0x2e4afe(0xea)]=!0x0,this[_0x2e4afe(0xaf)](_0xbd7752,_0x2e4afe(0xe8),()=>{const _0xca98df=_0x2e4afe;this[_0xca98df(0xba)](),this[_0xca98df(0xaf)](_0xbd7752,_0xca98df(0xe9),_0x57e4b4=>{const _0x207999=_0xca98df;_0x57e4b4[_0x207999(0xca)](),this[_0x207999(0x95)](_0x7b1f0a);});}),_0xbd7752[_0x2e4afe(0xdb)]({'viewClass':_0x2e4afe(0xe2),'spaceBetweenItems':0x5});const _0x3221e8=_0x54f851=>{const _0x5d69ed=_0x2e4afe,_0x144f4b=new _0x42281e(this[_0x5d69ed(0x109)][_0x5d69ed(0xf9)]);_0xbd7752[_0x5d69ed(0x10c)](_0x54f851,_0x144f4b),this[_0x5d69ed(0xd2)][_0x5d69ed(0xbd)](_0x54f851,_0x144f4b),_0x144f4b[_0x5d69ed(0xa2)](_0x5d69ed(0xe0),_0x5d69ed(0x98),_0x5d69ed(0xbc))['to'](_0x54f851[_0x5d69ed(0xb1)],_0x5d69ed(0xe0),_0x5d69ed(0x10b),_0x5d69ed(0xf5)),_0x144f4b['on'](_0x5d69ed(0xeb),()=>{const _0x533064=_0x5d69ed;this[_0x533064(0x10f)][_0x533064(0xa1)](),_0x5abf7e[_0x533064(0xf4)][_0x533064(0xe1)]!==_0x54f851[_0x533064(0xb1)]?(this[_0x533064(0xc7)](_0x54f851),_0x54f851[_0x533064(0xb1)][_0x533064(0xfb)][_0x533064(0xc9)](),this[_0x533064(0xf3)](_0x54f851)):this[_0x533064(0xf3)](null);});};for(const _0x1a78db of _0x7b1f0a)_0x3221e8(_0x1a78db);this[_0x2e4afe(0xaf)](_0x7b1f0a,_0x2e4afe(0xfa),(_0x5d3b26,_0x9752d5)=>{_0x3221e8(_0x9752d5);}),this[_0x2e4afe(0xaf)](_0x7b1f0a,_0x2e4afe(0xdc),(_0x34c38c,_0x19635b,_0x2f3cbf)=>{const _0x4b7a91=_0x2e4afe;this[_0x4b7a91(0xd2)][_0x4b7a91(0xae)](_0x19635b)[_0x4b7a91(0xf1)](),this[_0x4b7a91(0xd2)][_0x4b7a91(0xaa)](_0x19635b),_0xbd7752[_0x4b7a91(0x104)]({'removedAnnotation':_0x19635b,'previousAnnotation':_0x7b1f0a[_0x4b7a91(0xae)](_0x2f3cbf-0x1),'nextAnnotation':_0x7b1f0a[_0x4b7a91(0xae)](_0x2f3cbf+0x1)}),_0x19635b===this[_0x4b7a91(0x110)]&&this[_0x4b7a91(0xf3)](null);},{'priority':_0x2e4afe(0x9e)}),this[_0x2e4afe(0xaf)](_0x7b1f0a,_0x2e4afe(0xc9),(_0x348780,_0x4dbe92)=>{const _0x36466f=_0x2e4afe;this[_0x36466f(0xf3)](_0x4dbe92);}),this[_0x2e4afe(0xaf)](_0x7b1f0a,_0x2e4afe(0x107),()=>{const _0x2cc1c1=_0x2e4afe;this[_0x2cc1c1(0xf3)](null);}),this[_0x2e4afe(0xe4)][_0x2e4afe(0xaf)](document,_0x2e4afe(0xb6),(_0x4eb343,_0x1d87df)=>{const _0x18a4fb=_0x2e4afe;_0x1d87df[_0x18a4fb(0xbe)]===_0x2ece36[_0x18a4fb(0xd9)]&&_0x5abf7e[_0x18a4fb(0xd6)]&&(this[_0x18a4fb(0x10f)][_0x18a4fb(0xfa)](_0x5abf7e[_0x18a4fb(0xf4)][_0x18a4fb(0xe1)]),this[_0x18a4fb(0x9c)](),_0x1d87df[_0x18a4fb(0x99)](),_0x1d87df[_0x18a4fb(0xc6)]());}),this[_0x2e4afe(0xe4)][_0x2e4afe(0xaf)](document,_0x2e4afe(0xd4),(_0x139f7b,_0x32e4bf)=>{const _0x1df5ae=_0x2e4afe,_0x599c79=_0x32e4bf[_0x1df5ae(0xff)];_0x5abf7e[_0x1df5ae(0xd6)]&&_0x5abf7e[_0x1df5ae(0xfb)][_0x1df5ae(0xcc)](_0x599c79)||_0xbd7752[_0x1df5ae(0xb1)][_0x1df5ae(0xfb)][_0x1df5ae(0xcc)](_0x599c79)||_0x139f7b[_0x1df5ae(0xdf)]||this[_0x1df5ae(0x110)]&&this[_0x1df5ae(0x110)][_0x1df5ae(0xe7)][_0x1df5ae(0x96)](_0x36b35d=>_0x36b35d[_0x1df5ae(0xcc)](_0x599c79))||(this[_0x1df5ae(0x10f)][_0x1df5ae(0xa1)](),this[_0x1df5ae(0x9c)](),this[_0x1df5ae(0xf3)](null));});const _0x4d491d=this[_0x2e4afe(0x109)]instanceof _0x33f5ac?this[_0x2e4afe(0x109)][_0x2e4afe(0x9a)]:new _0x123ba5([this[_0x2e4afe(0x109)]]);for(const _0x28e1f9 of _0x4d491d)this[_0x2e4afe(0xf6)](_0x28e1f9);this[_0x2e4afe(0xaf)](_0x4d491d,_0x2e4afe(0xfa),(_0x56686d,_0x5788b7)=>{const _0x34dc5e=_0x2e4afe;this[_0x34dc5e(0xaf)](_0x5788b7,_0x34dc5e(0xb2),()=>{const _0x570671=_0x34dc5e;this[_0x570671(0xf6)](_0x5788b7);});}),this[_0x2e4afe(0xaf)](_0x4d491d,_0x2e4afe(0xdc),(_0x4741c0,_0x2e99d4)=>{const _0x328ddd=_0x2e4afe;_0x2e99d4[_0x328ddd(0x103)][_0x328ddd(0xac)](_0x328ddd(0x97))&&this[_0x328ddd(0xb8)](_0x2e99d4[_0x328ddd(0x103)][_0x328ddd(0xae)](_0x328ddd(0x97)));}),window[_0x2e4afe(0xcf)](_0x2e4afe(0xc0),this[_0x2e4afe(0xe6)]),this[_0x2e4afe(0xad)]();}[_0x380ebc(0xf3)](_0x3c2eed){const _0x5ded42=_0x380ebc;if(_0x3c2eed===this[_0x5ded42(0x110)])return;const _0x4ca0b9=this[_0x5ded42(0x109)][_0x5ded42(0x103)][_0x5ded42(0xae)](_0x4cec24);if(_0x4ca0b9[_0x5ded42(0x108)]({'blurredAnnotation':this[_0x5ded42(0x110)],'activatedAnnotation':_0x3c2eed,'disableAnimationOnActivatedAnnotation':!0x0}),_0x3c2eed)_0x4ca0b9[_0x5ded42(0x100)](_0x3c2eed)?this[_0x5ded42(0xc7)](_0x3c2eed):this[_0x5ded42(0x9c)]();else this[_0x5ded42(0x9c)]();this[_0x5ded42(0x110)]=_0x3c2eed;}[_0x380ebc(0xba)](){const _0x13378f=_0x380ebc;if(!this[_0x13378f(0xea)])throw new _0x561e27(_0x13378f(0xd1),this);this[_0x13378f(0xf3)](null);const _0x455fec=this[_0x13378f(0x109)][_0x13378f(0x103)][_0x13378f(0xae)](_0x4cec24);this[_0x13378f(0x9c)](),Array[_0x13378f(0xef)](this[_0x13378f(0xd2)][_0x13378f(0x9f)](),_0x51cc47=>_0x51cc47[_0x13378f(0xf1)]()),this[_0x13378f(0xd2)][_0x13378f(0xa1)](),_0x455fec[_0x13378f(0x94)](this[_0x13378f(0xd7)]),this[_0x13378f(0xb7)](),this[_0x13378f(0xe4)][_0x13378f(0xb7)](),this[_0x13378f(0x109)]instanceof _0x33f5ac&&this[_0x13378f(0xb7)](this[_0x13378f(0x109)][_0x13378f(0x9a)]);for(const _0x48a2a5 of Array[_0x13378f(0xef)](this[_0x13378f(0xbb)]))this[_0x13378f(0xb8)](_0x48a2a5);window[_0x13378f(0xdd)](_0x13378f(0xc0),this[_0x13378f(0xe6)]),this[_0x13378f(0xe6)][_0x13378f(0xda)](),this[_0x13378f(0xcd)]=[],this[_0x13378f(0xea)]=!0x1,this[_0x13378f(0xd7)]=null;}[_0x380ebc(0xf1)](){const _0x3e603e=_0x380ebc;this[_0x3e603e(0xea)]&&this[_0x3e603e(0xba)](),this[_0x3e603e(0x10d)][_0x3e603e(0xbf)]();}[_0x380ebc(0xf6)](_0x180270){const _0xb02b79=_0x380ebc;if(!_0x180270[_0xb02b79(0x103)][_0xb02b79(0xac)](_0xb02b79(0x97)))return;const _0x23965a=_0x180270[_0xb02b79(0x103)][_0xb02b79(0xae)](_0xb02b79(0x97)),_0x20c266=this[_0xb02b79(0x109)][_0xb02b79(0x103)][_0xb02b79(0xae)](_0x4cec24),_0x196bbb=this[_0xb02b79(0xd7)],_0x2183e0=this[_0xb02b79(0xec)],_0x31b11b=()=>{const _0x1c2ff0=_0xb02b79,_0x3d9c02=_0x23965a[_0x1c2ff0(0x101)]({'annotations':this[_0x1c2ff0(0xd7)],'activeAnnotation':this[_0x1c2ff0(0x110)]});this[_0x1c2ff0(0xa5)](_0x3d9c02),this[_0x1c2ff0(0xf3)](_0x3d9c02[0x0]||null);};this[_0xb02b79(0xaf)](_0x23965a,_0xb02b79(0x108),_0x31b11b),this[_0xb02b79(0xaf)](_0x23965a,_0xb02b79(0x107),(_0x4c4879,{isAnnotationTracked:_0x4f4609})=>{const _0x233808=_0xb02b79;this[_0x233808(0x110)]&&_0x4f4609(this[_0x233808(0x110)])&&(this[_0x233808(0xa5)]([]),this[_0x233808(0xf3)](null));}),this[_0xb02b79(0xaf)](_0x23965a,_0xb02b79(0xde),()=>{const _0x33868f=_0xb02b79;this[_0x33868f(0xe6)]();}),this[_0xb02b79(0xaf)](_0x196bbb,_0xb02b79(0x107),_0x5d3800=>{const _0x565721=_0xb02b79;_0x23965a[_0x565721(0xa9)]()&&_0x5d3800[_0x565721(0x10a)]();},{'priority':_0xb02b79(0xd8)}),this[_0xb02b79(0xaf)](this[_0xb02b79(0xe4)],_0xb02b79(0xd4),(_0x5513be,_0x175f74)=>{const _0x2c7a0c=_0xb02b79,_0x34c9fc=_0x175f74[_0x2c7a0c(0xff)];_0x2183e0[_0x2c7a0c(0xd6)]&&_0x2183e0[_0x2c7a0c(0xfb)][_0x2c7a0c(0xcc)](_0x34c9fc)||_0x20c266[_0x2c7a0c(0xb1)][_0x2c7a0c(0xfb)][_0x2c7a0c(0xcc)](_0x34c9fc)||this[_0x2c7a0c(0x110)]&&_0x23965a[_0x2c7a0c(0xa9)]()&&(_0x31b11b(),_0x5513be[_0x2c7a0c(0xdf)]=!0x0);},{'priority':_0xb02b79(0xd8)}),this[_0xb02b79(0xbb)][_0xb02b79(0xfa)](_0x23965a);}[_0x380ebc(0xb8)](_0x75a65d){const _0x42d4bb=_0x380ebc;_0x75a65d&&(this[_0x42d4bb(0xb7)](_0x75a65d),this[_0x42d4bb(0xbb)][_0x42d4bb(0xdc)](_0x75a65d));}[_0x380ebc(0xa5)](_0x48e90b){const _0xeace=_0x380ebc;for(const _0x1520d6 of this[_0xeace(0xcd)])_0x48e90b[_0xeace(0x9d)](_0x1520d6)||this[_0xeace(0x10f)][_0xeace(0xaa)](_0x1520d6[_0xeace(0xb1)]);this[_0xeace(0xcd)]=_0x48e90b;}[_0x380ebc(0xad)](){const _0xc4d5ea=_0x380ebc,_0x474037=this[_0xc4d5ea(0xec)];this[_0xc4d5ea(0xd7)][_0xc4d5ea(0xd3)](),_0x474037[_0xc4d5ea(0xd6)]&&this[_0xc4d5ea(0xf7)]();}[_0x380ebc(0xc7)](_0x5b9b7b){const _0x411833=_0x380ebc;if(this[_0x411833(0x10f)][_0x411833(0xac)](_0x5b9b7b[_0x411833(0xb1)]))return;const _0x412e5e=this[_0x411833(0xec)][_0x411833(0xf4)][_0x411833(0xe1)];_0x412e5e!==_0x5b9b7b[_0x411833(0xb1)]?(_0x412e5e&&this[_0x411833(0xb3)](_0x412e5e),this[_0x411833(0xe5)](_0x5b9b7b[_0x411833(0xb1)]),this[_0x411833(0xec)][_0x411833(0xf4)][_0x411833(0xa1)](),this[_0x411833(0xec)][_0x411833(0xf4)][_0x411833(0xfa)](_0x5b9b7b[_0x411833(0xb1)]),this[_0x411833(0xf7)]()):this[_0x411833(0xf7)]();}[_0x380ebc(0xf7)](){const _0x54fab3=_0x380ebc,_0xa2ec1=this[_0x54fab3(0xec)][_0x54fab3(0xf4)][_0x54fab3(0xe1)],_0x421496=_0xa2ec1&&this[_0x54fab3(0xd7)][_0x54fab3(0xb0)](_0xa2ec1);if(!_0x421496||!this[_0x54fab3(0xd2)][_0x54fab3(0xac)](_0x421496))return;const _0x5730e1=this[_0x54fab3(0xd2)][_0x54fab3(0xae)](_0x421496)[_0x54fab3(0xfb)],_0x30bc2a=(function(){const _0x44ba39=_0x54fab3,_0x25a995=_0x29a7a0[_0x44ba39(0xed)];return[_0x25a995[_0x44ba39(0xa6)],_0x25a995[_0x44ba39(0xfd)],_0x25a995[_0x44ba39(0xf2)],_0x25a995[_0x44ba39(0xa4)],_0x25a995[_0x44ba39(0xf8)],_0x25a995[_0x44ba39(0x10e)]];}());this[_0x54fab3(0xec)][_0x54fab3(0xcb)]({'target':_0x5730e1,'positions':_0x30bc2a});}[_0x380ebc(0x9c)](){const _0x356add=_0x380ebc,_0x53e5e7=this[_0x356add(0xec)],_0x12be7e=_0x53e5e7[_0x356add(0xf4)][_0x356add(0xe1)];_0x12be7e&&(this[_0x356add(0xb3)](_0x12be7e),_0x53e5e7[_0x356add(0xb5)](),_0x53e5e7[_0x356add(0xf4)][_0x356add(0xa1)]());}[_0x380ebc(0xe5)](_0xbfad41){const _0xb29073=_0x380ebc;this[_0xb29073(0xaf)](_0xbfad41,_0xb29073(0xc2),()=>this[_0xb29073(0xf7)]()),this[_0xb29073(0xaf)](_0xbfad41,_0xb29073(0xce),(_0x4d9ae8,_0x124ebb)=>{const _0x540604=_0xb29073;this[_0x540604(0x10f)][_0x540604(0xfa)](_0xbfad41),this[_0x540604(0x9c)](),_0x124ebb();});}[_0x380ebc(0xb3)](_0x3149ea){const _0x2ded98=_0x380ebc;this[_0x2ded98(0xb7)](_0x3149ea);}}