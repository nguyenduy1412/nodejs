/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x474ca0=_0x5ee4;(function(_0x1b5d12,_0x150a79){const _0x421783=_0x5ee4,_0xba9f15=_0x1b5d12();while(!![]){try{const _0x3db1c9=parseInt(_0x421783(0x1ae))/0x1*(-parseInt(_0x421783(0x190))/0x2)+-parseInt(_0x421783(0x191))/0x3*(-parseInt(_0x421783(0x19d))/0x4)+parseInt(_0x421783(0x192))/0x5+-parseInt(_0x421783(0x17e))/0x6+parseInt(_0x421783(0x1a5))/0x7*(parseInt(_0x421783(0x1b2))/0x8)+parseInt(_0x421783(0x1b7))/0x9*(-parseInt(_0x421783(0x170))/0xa)+-parseInt(_0x421783(0x1b6))/0xb*(-parseInt(_0x421783(0x198))/0xc);if(_0x3db1c9===_0x150a79)break;else _0xba9f15['push'](_0xba9f15['shift']());}catch(_0x247dfc){_0xba9f15['push'](_0xba9f15['shift']());}}}(_0x42bb,0x39fcb));import{default as _0xa1ecb4}from'./aitextadapter.js';import{AIRequestError as _0x66b318}from'./aiadapter.js';function _0x5ee4(_0x42e9fe,_0x1c49e2){const _0x42bb05=_0x42bb();return _0x5ee4=function(_0x5ee434,_0x1dddcf){_0x5ee434=_0x5ee434-0x170;let _0x2a4194=_0x42bb05[_0x5ee434];return _0x2a4194;},_0x5ee4(_0x42e9fe,_0x1c49e2);}import{getTranslation as _0x59def7}from'../utils/common-translations.js';export default class H extends _0xa1ecb4{static get[_0x474ca0(0x1b1)](){const _0x43d951=_0x474ca0;return _0x43d951(0x19c);}constructor(_0x553f48){const _0xcca64d=_0x474ca0;super(_0x553f48),_0x553f48[_0xcca64d(0x1b4)][_0xcca64d(0x179)](_0xcca64d(0x174),_0xcca64d(0x1ad)),_0x553f48[_0xcca64d(0x1b4)][_0xcca64d(0x171)](_0xcca64d(0x19b))||_0x553f48[_0xcca64d(0x1b4)][_0xcca64d(0x179)](_0xcca64d(0x19b),{'model':_0xcca64d(0x181),'max_tokens':0x7d0,'temperature':0x1,'top_p':0x1,'stream':!0x0}),this[_0xcca64d(0x186)]=_0x553f48[_0xcca64d(0x1b4)][_0xcca64d(0x171)](_0xcca64d(0x174)),this[_0xcca64d(0x184)]=_0x553f48[_0xcca64d(0x1b4)][_0xcca64d(0x171)](_0xcca64d(0x19a))||{},this[_0xcca64d(0x1a6)]=_0x553f48[_0xcca64d(0x1b4)][_0xcca64d(0x171)](_0xcca64d(0x19b));}async[_0x474ca0(0x175)]({query:_0xe7c877,context:_0x181c6e,onData:_0x1835a2,actionId:_0x3ec5d7}){const _0x294f21=_0x474ca0,_0x261e3f=this[_0x294f21(0x17b)][_0x294f21(0x17f)],_0x2e065c=await this[_0x294f21(0x18c)](_0xe7c877,_0x181c6e,_0x3ec5d7),_0x18ad37=await this[_0x294f21(0x1a1)](this[_0x294f21(0x184)],_0x3ec5d7),_0x172145=await this[_0x294f21(0x1b3)](this[_0x294f21(0x1a6)],_0x3ec5d7),_0x5143c1={'messages':_0x2e065c,..._0x172145},_0x39b29b={'method':_0x294f21(0x178),'headers':_0x18ad37,'body':JSON[_0x294f21(0x195)](_0x5143c1),'signal':this[_0x294f21(0x196)][_0x294f21(0x1a0)]},_0x5332f0=await fetch(this[_0x294f21(0x186)],_0x39b29b);if(_0x5332f0['ok'])return _0x172145[_0x294f21(0x182)]?await this[_0x294f21(0x1aa)](_0x5332f0,_0x1835a2):await this[_0x294f21(0x197)](_0x5332f0,_0x1835a2),Promise[_0x294f21(0x1b0)]();{const _0x2149c4=await _0x5332f0[_0x294f21(0x176)]();return _0x2149c4[_0x294f21(0x173)](_0x294f21(0x188))?Promise[_0x294f21(0x1af)](new _0x66b318(_0x59def7(_0x261e3f,_0x294f21(0x187)))):_0x2149c4[_0x294f21(0x173)](_0x294f21(0x177))?Promise[_0x294f21(0x1af)](new _0x66b318(_0x59def7(_0x261e3f,_0x294f21(0x1a3)))):Promise[_0x294f21(0x1af)](new Error(_0x2149c4));}}async[_0x474ca0(0x18c)](_0x3741c1,_0x15858b,_0x5866fb){const _0x994954=_0x474ca0;let _0x2ee19d,_0x24be82;return _0x15858b?(_0x2ee19d=_0x994954(0x18b),_0x24be82=_0x994954(0x18e)+_0x3741c1+_0x994954(0x172)+_0x15858b):(_0x2ee19d=_0x994954(0x1a4),_0x24be82=_0x3741c1),[{'role':_0x994954(0x199),'content':_0x2ee19d},{'role':_0x994954(0x17d),'content':_0x24be82}];}async[_0x474ca0(0x1aa)](_0x3ac6a2,_0x86ed4e){const _0x18aa49=_0x474ca0,_0x5b7b16=_0x3ac6a2[_0x18aa49(0x180)][_0x18aa49(0x18f)](),_0x5afff2=new TextDecoder();let _0x20f18e='',_0x15bd33='',_0x2d2ab6='',_0x39706b=!0x1;for(;!_0x39706b;){const {done:_0x5f38c1,value:_0x23b5e2}=await _0x5b7b16[_0x18aa49(0x19e)](),_0xaad904=_0x20f18e+_0x5afff2[_0x18aa49(0x183)](_0x23b5e2);let _0x5bc108='';_0x39706b=_0x5f38c1;try{_0x5bc108=this[_0x18aa49(0x1a8)](_0xaad904),_0x20f18e='';}catch(_0x25a34e){_0x20f18e=_0xaad904;continue;}_0x15bd33+=_0x5bc108,!_0x39706b&&this[_0x18aa49(0x1a7)](_0x15bd33)||_0x15bd33&&(_0x2d2ab6+=_0x15bd33,_0x15bd33='',_0x86ed4e(_0x2d2ab6));}return Promise[_0x18aa49(0x1b0)]();}async[_0x474ca0(0x197)](_0x4a2e99,_0x2347b2){const _0x55d4aa=_0x474ca0;return _0x2347b2((await _0x4a2e99[_0x55d4aa(0x194)]())[_0x55d4aa(0x19f)][0x0][_0x55d4aa(0x17a)][_0x55d4aa(0x1a2)]),Promise[_0x55d4aa(0x1b0)]();}[_0x474ca0(0x1a7)](_0xdcdc5c){const _0x59809c=_0x474ca0,_0x34f2e7=_0xdcdc5c[_0x59809c(0x185)]('<')[_0x59809c(0x1b5)]!==_0xdcdc5c[_0x59809c(0x185)]('>')[_0x59809c(0x1b5)],_0x33078d=_0xdcdc5c[_0x59809c(0x1b5)]<0x1e;return _0x34f2e7&&_0x33078d;}[_0x474ca0(0x1a8)](_0x156b6f){const _0x179a2d=_0x474ca0;return _0x156b6f[_0x179a2d(0x185)](/\n(?![^{]*\})/g)[_0x179a2d(0x1a9)](_0x56abb9=>_0x56abb9[_0x179a2d(0x1ac)](_0x179a2d(0x1ab),''))[_0x179a2d(0x193)](_0x57635b=>_0x57635b&&_0x57635b[_0x179a2d(0x1b5)]>0x0&&_0x179a2d(0x18d)!==_0x57635b)[_0x179a2d(0x1a9)](_0x1d6735=>{const _0x2f1d07=_0x179a2d,{choices:_0x525f5b}=JSON[_0x2f1d07(0x189)](_0x1d6735);if(_0x525f5b[0x0]&&_0x525f5b[0x0][_0x2f1d07(0x17c)]&&_0x525f5b[0x0][_0x2f1d07(0x17c)][_0x2f1d07(0x1a2)])return _0x525f5b[0x0][_0x2f1d07(0x17c)][_0x2f1d07(0x1a2)];})[_0x179a2d(0x193)](_0x504624=>_0x504624)[_0x179a2d(0x18a)]('');}}function _0x42bb(){const _0x56e5fb=['sendRequest','text','Moderation','POST','define','message','editor','delta','user','690996dhZtvJ','locale','body','gpt-3.5-turbo','stream','decode','_requestHeaders','split','_apiUrl','AI_ERROR_CONTEXT_LENGTH','context_length_exceeded','parse','join','Your\x20task\x20is\x20to\x20execute\x20the\x20instruction\x20using\x20the\x20provided\x20HTML\x20content.\x20Follow\x20the\x20instruction\x20closely.\x20Your\x20answer\x20must\x20be\x20a\x20properly\x20formatted\x20HTML\x20code.\x20Do\x20not\x20add\x20any\x20additional\x20remarks\x20or\x20notes.\x20Do\x20not\x20act\x20like\x20a\x20chatbot\x20or\x20a\x20real\x20person.','prepareMessages','[DONE]','Instruction:\x0a','getReader','4846rDiNme','148683WUPJLT','524725hngwNl','filter','json','stringify','abortController','_readStaticResponse','1500azGCEZ','system','ai.openAI.requestHeaders','ai.openAI.requestParameters','OpenAITextAdapter','12IxQXew','read','choices','signal','_prepareRequestHeaders','content','AI_ERROR_MODERATION','Your\x20task\x20is\x20to\x20generate\x20HTML\x20content\x20accordingly\x20to\x20the\x20given\x20instruction.\x20Never\x20include\x20<img>\x20tag\x20in\x20your\x20response\x20even\x20if\x20asked\x20for.\x20Your\x20answer\x20must\x20be\x20a\x20well-structured\x20and\x20properly\x20formatted\x20HTML\x20code.\x20Answer\x20only\x20with\x20the\x20generated\x20HTML\x20content.\x20Do\x20not\x20add\x20any\x20additional\x20remarks\x20or\x20notes.\x20Do\x20not\x20act\x20like\x20a\x20chatbot\x20or\x20a\x20real\x20person.','92057vCTCeB','_requestParameters','_isBufferIncomplete','_cleanUpData','map','_readStreamableResponse','data:\x20','replace','https://api.openai.com/v1/chat/completions','143gxuFPu','reject','resolve','pluginName','152DgVAeC','_prepareRequestParameters','config','length','55319GcjvMj','414BcPYAN','94120tlqAjK','get','\x0aYou\x20must\x20keep\x20the\x20text\x20formatting.\x0a\x0aContent:\x0a','includes','ai.openAI.apiUrl'];_0x42bb=function(){return _0x56e5fb;};return _0x42bb();}