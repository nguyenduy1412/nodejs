/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x5b6955=_0x1b21;(function(_0x3fd5f5,_0x5c5138){const _0x27517c=_0x1b21,_0x5df78f=_0x3fd5f5();while(!![]){try{const _0x13ddd4=-parseInt(_0x27517c(0x18c))/0x1+-parseInt(_0x27517c(0x19c))/0x2*(-parseInt(_0x27517c(0x16c))/0x3)+parseInt(_0x27517c(0x198))/0x4+-parseInt(_0x27517c(0x17f))/0x5*(parseInt(_0x27517c(0x165))/0x6)+-parseInt(_0x27517c(0x163))/0x7*(parseInt(_0x27517c(0x188))/0x8)+-parseInt(_0x27517c(0x160))/0x9*(-parseInt(_0x27517c(0x15b))/0xa)+parseInt(_0x27517c(0x186))/0xb;if(_0x13ddd4===_0x5c5138)break;else _0x5df78f['push'](_0x5df78f['shift']());}catch(_0x4faca7){_0x5df78f['push'](_0x5df78f['shift']());}}}(_0xbf57,0x681a3));import{default as _0x2a1303}from'./aitextadapter.js';import{AIRequestError as _0x235984}from'./aiadapter.js';import{BedrockRuntimeClient as _0x2b4f7d,InvokeModelCommand as _0x5b427f,InvokeModelWithResponseStreamCommand as _0x54ad14}from'@aws-sdk/client-bedrock-runtime';import{getTranslation as _0x3b13c5}from'../utils/common-translations.js';function _0xbf57(){const _0x27f3f4=['split','60NMzaAP','_requestParameters','cohere.command','data','read','decode','Instruction:\x0a','ai.aws.requestParameters','abortController','locale','_prepareRequestParameters','bytes','preparePrompt','Human:\x0a','anthropic.claude-v2','test','editor','send','generations','151585axDmSx','getReader','POST','AI_ERROR_UNSUPPORTED_MODEL','json','\x0a[/INST]','_bedrockClientConfig','9734868irrTFm','map','8rJgooM','join','config','generation','686164jCOkWT','\x0aYou\x20must\x20keep\x20the\x20text\x20formatting.\x0a\x0aContent:\x0a','Your\x20task\x20is\x20to\x20execute\x20the\x20instruction\x20using\x20the\x20provided\x20HTML\x20content.\x20Follow\x20the\x20instruction\x20closely.\x20Your\x20answer\x20must\x20be\x20a\x20properly\x20formatted\x20HTML\x20code.\x20Do\x20not\x20add\x20any\x20additional\x20remarks\x20or\x20notes.\x20Do\x20not\x20act\x20like\x20a\x20chatbot\x20or\x20a\x20real\x20person.','filter','\x0a<</SYS>>\x0a[INST]\x0a','body','resolve','chunk','pluginName','parse','completion','meta.llama','293552GMuMTt','_prepareRequestHeaders','sendRequest','ai21.j2','2128WsNvqV','_apiUrl','anthropic.claude','from','ai.aws.requestHeaders','_processAWSRequest','application/json','ai.aws.apiUrl','define','completions','_getGeneratedText','AWSTextAdapter','<<SYS>>\x0a','_readAsyncIterableResponse','\x0a\x0aAssistant:','Your\x20task\x20is\x20to\x20generate\x20HTML\x20content\x20accordingly\x20to\x20the\x20given\x20instruction.\x20Never\x20include\x20<img>\x20tag\x20in\x20your\x20response\x20even\x20if\x20asked\x20for.\x20Your\x20answer\x20must\x20be\x20a\x20well-structured\x20and\x20properly\x20formatted\x20HTML\x20code.\x20Answer\x20only\x20with\x20the\x20generated\x20HTML\x20content.\x20Do\x20not\x20add\x20any\x20additional\x20remarks\x20or\x20notes.\x20Do\x20not\x20act\x20like\x20a\x20chatbot\x20or\x20a\x20real\x20person.','text','ai.aws.bedrockClientConfig','stringify','7581270iYgGdN','_requestHeaders','utf-8','length','toString','9eIozoN','_readStaticResponse','bedrock-2023-05-31','4164293gWOPli','_processProxyRequest','6JxIHqA','utf8','getModelFamily','signal','get','_readStreamableResponse'];_0xbf57=function(){return _0x27f3f4;};return _0xbf57();}function _0x1b21(_0x396f5a,_0x8846ac){const _0xbf5799=_0xbf57();return _0x1b21=function(_0x1b21d4,_0xfb3bb4){_0x1b21d4=_0x1b21d4-0x155;let _0x414db1=_0xbf5799[_0x1b21d4];return _0x414db1;},_0x1b21(_0x396f5a,_0x8846ac);}export default class O extends _0x2a1303{static get[_0x5b6955(0x194)](){const _0x224928=_0x5b6955;return _0x224928(0x1a7);}constructor(_0x2d2e26){const _0x470ddb=_0x5b6955;super(_0x2d2e26),_0x2d2e26[_0x470ddb(0x18a)][_0x470ddb(0x169)](_0x470ddb(0x173))||_0x2d2e26[_0x470ddb(0x18a)][_0x470ddb(0x1a4)](_0x470ddb(0x173),{'model':_0x470ddb(0x17a),'max_tokens_to_sample':0x7d0,'temperature':0x1,'top_p':0x1,'top_k':0xfa,'anthropic_version':_0x470ddb(0x162),'stream':!0x0}),this[_0x470ddb(0x19d)]=_0x2d2e26[_0x470ddb(0x18a)][_0x470ddb(0x169)](_0x470ddb(0x1a3)),this[_0x470ddb(0x185)]=_0x2d2e26[_0x470ddb(0x18a)][_0x470ddb(0x169)](_0x470ddb(0x159)),this[_0x470ddb(0x15c)]=_0x2d2e26[_0x470ddb(0x18a)][_0x470ddb(0x169)](_0x470ddb(0x1a0)),this[_0x470ddb(0x16d)]=_0x2d2e26[_0x470ddb(0x18a)][_0x470ddb(0x169)](_0x470ddb(0x173));}async[_0x5b6955(0x19a)]({query:_0x5475ec,context:_0x27cd37,onData:_0x54faf2,actionId:_0x1bba45}){const _0x5bc1ab=_0x5b6955,{model:_0x589104,stream:_0x3a2c2f,..._0x3bf2c0}=await this[_0x5bc1ab(0x176)](this[_0x5bc1ab(0x16d)],_0x1bba45),_0x6c178c={'prompt':await this[_0x5bc1ab(0x178)](_0x5475ec,_0x27cd37,_0x589104,_0x1bba45),..._0x3bf2c0};this[_0x5bc1ab(0x19d)]?await this[_0x5bc1ab(0x164)](_0x6c178c,_0x589104,_0x3a2c2f,_0x54faf2,_0x1bba45):await this[_0x5bc1ab(0x1a1)](_0x6c178c,_0x589104,_0x3a2c2f,_0x54faf2);}async[_0x5b6955(0x178)](_0x33abcd,_0x49fc05,_0x2d0db7,_0x11151f){const _0x377fe8=_0x5b6955;let _0x3f716c,_0x1d8060;return _0x49fc05?(_0x3f716c=_0x377fe8(0x18e),_0x1d8060=_0x377fe8(0x172)+_0x33abcd+_0x377fe8(0x18d)+_0x49fc05):(_0x3f716c=_0x377fe8(0x157),_0x1d8060=_0x33abcd),_0x377fe8(0x197)==this[_0x377fe8(0x167)](_0x2d0db7)?_0x377fe8(0x1a8)+_0x3f716c+_0x377fe8(0x190)+_0x1d8060+_0x377fe8(0x184):_0x377fe8(0x179)+_0x3f716c+'\x0a'+_0x1d8060+_0x377fe8(0x156);}[_0x5b6955(0x167)](_0x49c8d2){const _0x1d1bb5=_0x5b6955;if(/^anthropic\.claude/[_0x1d1bb5(0x17b)](_0x49c8d2))return _0x1d1bb5(0x19e);if(/^ai21\.j2/[_0x1d1bb5(0x17b)](_0x49c8d2))return _0x1d1bb5(0x19b);if(/^cohere\.command/[_0x1d1bb5(0x17b)](_0x49c8d2))return _0x1d1bb5(0x16e);if(/^meta\.llama/[_0x1d1bb5(0x17b)](_0x49c8d2))return _0x1d1bb5(0x197);throw new _0x235984(_0x3b13c5(this[_0x1d1bb5(0x17c)][_0x1d1bb5(0x175)],_0x1d1bb5(0x182),_0x49c8d2));}async[_0x5b6955(0x164)](_0xd30e21,_0x3abca4,_0x2df378,_0x326799,_0x685a4a){const _0x564a92=_0x5b6955,_0x10df1e={'method':_0x564a92(0x181),'headers':await this[_0x564a92(0x199)](this[_0x564a92(0x15c)],_0x685a4a),'body':JSON[_0x564a92(0x15a)]({..._0xd30e21,'model':_0x3abca4,'stream':_0x2df378}),'signal':this[_0x564a92(0x174)][_0x564a92(0x168)]},_0x5dc422=await fetch(this[_0x564a92(0x19d)],_0x10df1e);_0x2df378?await this[_0x564a92(0x16a)](_0x5dc422,_0x3abca4,_0x326799):await this[_0x564a92(0x161)](_0x5dc422,_0x3abca4,_0x326799);}async[_0x5b6955(0x1a1)](_0x45268c,_0x426b09,_0x323499,_0x56f95b){const _0x49652d=_0x5b6955,_0xff05ec=new _0x2b4f7d(this[_0x49652d(0x185)]),_0x57b3f7={'body':JSON[_0x49652d(0x15a)](_0x45268c),'contentType':_0x49652d(0x1a2),'accept':_0x49652d(0x1a2),'modelId':_0x426b09};let _0x174877;if(_0x323499){const _0x2567c5=new _0x54ad14(_0x57b3f7);_0x174877=await _0xff05ec[_0x49652d(0x17d)](_0x2567c5,{'abortSignal':this[_0x49652d(0x174)][_0x49652d(0x168)]}),await this[_0x49652d(0x155)](_0x174877,_0x426b09,_0x56f95b);}else{const _0x4195c3=new _0x5b427f(_0x57b3f7);_0x174877=await _0xff05ec[_0x49652d(0x17d)](_0x4195c3,{'abortSignal':this[_0x49652d(0x174)][_0x49652d(0x168)]}),await this[_0x49652d(0x161)](_0x174877,_0x426b09,_0x56f95b);}}async[_0x5b6955(0x155)](_0x2ac680,_0x70aa1b,_0x55e1d7){const _0x29b4b5=_0x5b6955,_0x58aed0=_0x2ac680[_0x29b4b5(0x191)],_0x353ab8=new TextDecoder(_0x29b4b5(0x15d));let _0x2e9ada='';for await(const _0x28f52d of _0x58aed0)if(_0x28f52d[_0x29b4b5(0x193)]){const _0x260270=_0x353ab8[_0x29b4b5(0x171)](_0x28f52d[_0x29b4b5(0x193)][_0x29b4b5(0x177)]),_0x3fcb21=JSON[_0x29b4b5(0x195)](_0x260270);_0x2e9ada+=this[_0x29b4b5(0x1a6)](_0x3fcb21,_0x70aa1b),_0x55e1d7(_0x2e9ada);}return Promise[_0x29b4b5(0x192)]();}async[_0x5b6955(0x16a)](_0x5bb4f9,_0x4ffe8d,_0x5a96e8){const _0x595905=_0x5b6955,_0x38caa1=_0x5bb4f9[_0x595905(0x191)],_0x46e651=new TextDecoder(_0x595905(0x15d)),_0x3b3868=_0x38caa1[_0x595905(0x180)]();let _0x240eff='',_0x2aff8f='',_0x430720=!0x1;for(;!_0x430720;){const {done:_0xfe6459,value:_0x2a0d2d}=await _0x3b3868[_0x595905(0x170)]();if(_0x430720=_0xfe6459,_0x430720)break;const _0x28ac6c=(_0x240eff+_0x46e651[_0x595905(0x171)](_0x2a0d2d))[_0x595905(0x16b)]('\x0a')[_0x595905(0x187)](_0x27fdc9=>{const _0x3dfcac=_0x595905;try{return _0x240eff='',JSON[_0x3dfcac(0x195)](_0x27fdc9);}catch(_0x5e7713){return _0x240eff=_0x27fdc9,null;}})[_0x595905(0x18f)](_0x2a13a6=>null!==_0x2a13a6);_0x28ac6c[_0x595905(0x15e)]&&(_0x2aff8f+=_0x28ac6c[_0x595905(0x187)](_0x6fbb5f=>this[_0x595905(0x1a6)](_0x6fbb5f,_0x4ffe8d))[_0x595905(0x189)](''),_0x5a96e8(_0x2aff8f));}return Promise[_0x595905(0x192)]();}async[_0x5b6955(0x161)](_0x3f3948,_0x418e21,_0x5bb9a7){const _0x1aafc1=_0x5b6955;let _0x12e8fd;return _0x12e8fd=_0x3f3948 instanceof Response?await _0x3f3948[_0x1aafc1(0x183)]():JSON[_0x1aafc1(0x195)](Buffer[_0x1aafc1(0x19f)](_0x3f3948[_0x1aafc1(0x191)])[_0x1aafc1(0x15f)](_0x1aafc1(0x166))),(_0x5bb9a7(this[_0x1aafc1(0x1a6)](_0x12e8fd,_0x418e21)),Promise[_0x1aafc1(0x192)]());}[_0x5b6955(0x1a6)](_0x1cab0f,_0x23c183){const _0x68ed21=_0x5b6955;switch(this[_0x68ed21(0x167)](_0x23c183)){case _0x68ed21(0x19e):return _0x1cab0f[_0x68ed21(0x196)];case _0x68ed21(0x19b):return _0x1cab0f[_0x68ed21(0x1a5)][0x0][_0x68ed21(0x16f)][_0x68ed21(0x158)];case _0x68ed21(0x16e):return _0x1cab0f[_0x68ed21(0x17e)][0x0][_0x68ed21(0x158)];case _0x68ed21(0x197):return _0x1cab0f[_0x68ed21(0x18b)];}}}