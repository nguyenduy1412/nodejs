/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
function _0x4546(){const _0x173826=['97818hqasIE','220153DeHItm','initialContext','isProcessing','stopProcessing','handleError','2596cinWoc','editor','htmlProcessor','match','stringify','processor','_xmlSerializer','set:currentContext','_domParser','makeRequest','```html','nodeType','push','_parseAndNormalizeContent','startProcessing','listenTo','previousContext','72009SwWaBY','currentContext','childNodes','exec','set','1461760kcYWTY','abort','textAdapter','remove','substring','toView','_normalizeResponseHeadings','length','serializeToString','1414044QEzWLo','editing','submitPrompt','previousQuery','createElement','prompt','32EQXHnI','value','56xaaoze','querySelector','domConverter','trim','div','destroy','_sanitizeHTML','tryAgainEvent','mainAction','custom','6jxzrvq','previousActionId','674870TqqlmI','reverse','stopListening','currentResponse','_sanitizationContainer','updateView','message','finishProcessing','document','_stripMarkdownSyntax','name','<h1></h1>','rename','isRendered','_handleQuery','once','innerHTML','from','startsWith','data','reset','render','viewToDom','then','_isH1TagSupportEnabled','ELEMENT_NODE','```','previousLabel','setContentOf','toModel','element','endsWith','text/html','parseFromString','catch','finally','body','11030bDyQVW','view'];_0x4546=function(){return _0x173826;};return _0x4546();}function _0x52b2(_0x7c0b20,_0x17971f){const _0x45468a=_0x4546();return _0x52b2=function(_0x52b20e,_0x56d0c6){_0x52b20e=_0x52b20e-0xc6;let _0x24f6aa=_0x45468a[_0x52b20e];return _0x24f6aa;},_0x52b2(_0x7c0b20,_0x17971f);}const _0x39eb90=_0x52b2;(function(_0x467beb,_0x1947dd){const _0x55e298=_0x52b2,_0xbfbfcf=_0x467beb();while(!![]){try{const _0xe51549=parseInt(_0x55e298(0xdc))/0x1+-parseInt(_0x55e298(0x114))/0x2+parseInt(_0x55e298(0xdb))/0x3*(-parseInt(_0x55e298(0x106))/0x4)+-parseInt(_0x55e298(0xf7))/0x5*(-parseInt(_0x55e298(0x112))/0x6)+parseInt(_0x55e298(0xf2))/0x7*(-parseInt(_0x55e298(0x108))/0x8)+parseInt(_0x55e298(0x100))/0x9+parseInt(_0x55e298(0xd9))/0xa*(parseInt(_0x55e298(0xe1))/0xb);if(_0xe51549===_0x1947dd)break;else _0xbfbfcf['push'](_0xbfbfcf['shift']());}catch(_0xd3de10){_0xbfbfcf['push'](_0xbfbfcf['shift']());}}}(_0x4546,0x3f635));import{ObservableMixin as _0x454708}from'ckeditor5/src/utils.js';import{AIRequestError as _0x16da7a}from'../adapters/aiadapter.js';import{Matcher as _0x1c6f37,UpcastWriter as _0x16f513}from'ckeditor5/src/engine.js';const Z=new RegExp(/^(.*?)<[a-zA-Z][a-zA-Z0-9_\-.]*[ >]/,'is');export default class v extends/* #__PURE__ -- @preserve */
_0x454708(){constructor(_0x274b4e,_0x3c404a,_0x27fdd1){const _0x114efd=_0x52b2;super(),this[_0x114efd(0xe2)]=_0x274b4e,this[_0x114efd(0xf9)]=_0x3c404a,this[_0x114efd(0x118)]=document[_0x114efd(0x104)](_0x114efd(0x10c)),this[_0x114efd(0xe9)]=new DOMParser(),this[_0x114efd(0xe7)]=new XMLSerializer(),this[_0x114efd(0xda)]=_0x27fdd1,this[_0x114efd(0xf6)]({'initialContext':'','currentContext':'','currentResponse':'','previousContext':void 0x0,'previousQuery':void 0x0,'previousLabel':void 0x0,'isProcessing':!0x1}),this['on'](_0x114efd(0xe8),(_0x5a9823,_0x2ca603,_0x4c44d8)=>{const _0x384ed9=_0x114efd;this[_0x384ed9(0xda)][_0x384ed9(0x107)]=this[_0x384ed9(0x10e)](_0x4c44d8);}),this[_0x114efd(0xf0)](this[_0x114efd(0xda)],_0x114efd(0x102),(_0x93a68e,_0x40c791)=>{const _0x33cf86=_0x114efd,_0x342071=this[_0x33cf86(0xf3)]||this[_0x33cf86(0xdd)];this[_0x33cf86(0x122)](_0x40c791,_0x342071,_0x33cf86(0x111));}),this[_0x114efd(0xf0)](this[_0x114efd(0xda)],_0x114efd(0x10f),()=>{const _0x5d3dd4=_0x114efd;this[_0x5d3dd4(0xda)][_0x5d3dd4(0x105)]=this[_0x5d3dd4(0xcf)],this[_0x5d3dd4(0x122)](this[_0x5d3dd4(0x103)],this[_0x5d3dd4(0xf1)],this[_0x5d3dd4(0x113)],this[_0x5d3dd4(0xcf)]);}),this[_0x114efd(0xf0)](this[_0x114efd(0xda)],_0x114efd(0xdf),()=>{const _0x3aad8b=_0x114efd;this[_0x3aad8b(0xdf)]();});}[_0x39eb90(0x10d)](){const _0x304865=_0x39eb90;this[_0x304865(0x116)]();}async[_0x39eb90(0x119)]({actionId:_0x54f1e7,query:_0x57e244,htmlContent:_0x2fa964,label:_0x72713a,mainActionLabel:_0x468d37}){const _0x24016c=_0x39eb90;this[_0x24016c(0xda)][_0x24016c(0x105)]=_0x72713a,this[_0x24016c(0xda)][_0x24016c(0x110)]=_0x468d37,this[_0x24016c(0xdd)]=_0x2fa964,_0x57e244&&(this[_0x24016c(0xda)][_0x24016c(0x121)]?this[_0x24016c(0x122)](_0x57e244,_0x2fa964,_0x54f1e7,_0x72713a):this[_0x24016c(0xda)][_0x24016c(0x123)](_0x24016c(0xc9),()=>{const _0x22e883=_0x24016c;this[_0x22e883(0x122)](_0x57e244,_0x2fa964,_0x54f1e7,_0x72713a);}));}[_0x39eb90(0xdf)](){const _0x4651c3=_0x39eb90;this[_0x4651c3(0xde)]&&(this[_0x4651c3(0xde)]=!0x1,this[_0x4651c3(0xda)][_0x4651c3(0x11b)](),this[_0x4651c3(0xf9)][_0x4651c3(0xf8)]());}[_0x39eb90(0xc8)](){const _0x19d098=_0x39eb90;this[_0x19d098(0xdd)]='',this[_0x19d098(0xf3)]='',this[_0x19d098(0x117)]='',this[_0x19d098(0xf1)]='',this[_0x19d098(0x103)]='',this[_0x19d098(0xcf)]='',this[_0x19d098(0x113)]=void 0x0,this[_0x19d098(0xda)][_0x19d098(0xc8)](),this[_0x19d098(0xdf)]();}async[_0x39eb90(0x122)](_0x42e32e,_0x525f95,_0x383376,_0x13be28){const _0x3e6f34=_0x39eb90;return this[_0x3e6f34(0xde)]=!0x0,this[_0x3e6f34(0xda)][_0x3e6f34(0xef)](),this[_0x3e6f34(0xf1)]=_0x525f95,this[_0x3e6f34(0x103)]=_0x42e32e,this[_0x3e6f34(0xcf)]=_0x13be28||_0x42e32e,this[_0x3e6f34(0x113)]=_0x383376,new Promise(_0x379ba2=>{const _0x5734e1=_0x3e6f34;this[_0x5734e1(0xf9)][_0x5734e1(0xea)]({'query':_0x42e32e,'context':_0x525f95,'onData':_0x593fc5=>{const _0x30fe98=_0x5734e1;this[_0x30fe98(0x117)]=_0x593fc5,this[_0x30fe98(0xf3)]=this[_0x30fe98(0xee)](this[_0x30fe98(0x117)]);},'actionId':_0x383376})[_0x5734e1(0xcb)](()=>{const _0x402445=_0x5734e1;!this[_0x402445(0xf3)]&&this[_0x402445(0x117)]&&(this[_0x402445(0xf3)]=this[_0x402445(0xee)](this[_0x402445(0x117)],!0x0));})[_0x5734e1(0xd6)](_0x115837=>{const _0x5a1ee7=_0x5734e1;_0x115837 instanceof _0x16da7a?this[_0x5a1ee7(0xda)][_0x5a1ee7(0xe0)](_0x115837[_0x5a1ee7(0x11a)]):this[_0x5a1ee7(0xda)][_0x5a1ee7(0xe0)](),_0x379ba2();})[_0x5734e1(0xd7)](()=>{const _0x4b6d30=_0x5734e1;this[_0x4b6d30(0xdf)](),_0x379ba2();});});}[_0x39eb90(0xee)](_0x3b5e45,_0x527074=!0x1){const _0x3ba9cf=_0x39eb90,_0x5a6850=Z[_0x3ba9cf(0xf5)](_0x3b5e45);_0x3b5e45=_0x5a6850?_0x3b5e45[_0x3ba9cf(0xfb)](_0x5a6850[0x1][_0x3ba9cf(0xfe)]):_0x3b5e45[_0x3ba9cf(0xfe)]<0x64&&!_0x527074?'':this[_0x3ba9cf(0x11d)](_0x3b5e45);const _0x209d28=this[_0x3ba9cf(0xe9)][_0x3ba9cf(0xd5)](_0x3b5e45,_0x3ba9cf(0xd4));if(_0x5a6850){const _0x186c46=Array[_0x3ba9cf(0x125)](_0x209d28[_0x3ba9cf(0xd8)][_0x3ba9cf(0xf4)]);_0x186c46[_0x3ba9cf(0x115)]();for(const _0x50f044 of _0x186c46){if(_0x50f044[_0x3ba9cf(0xec)]==Node[_0x3ba9cf(0xcd)])break;_0x50f044[_0x3ba9cf(0xfa)]();}}const _0x513356=this[_0x3ba9cf(0xe2)][_0x3ba9cf(0xc7)][_0x3ba9cf(0xe6)][_0x3ba9cf(0xfc)](this[_0x3ba9cf(0xe7)][_0x3ba9cf(0xff)](_0x209d28[_0x3ba9cf(0xd8)]));return this[_0x3ba9cf(0xcc)]()||this[_0x3ba9cf(0xfd)](_0x513356),this[_0x3ba9cf(0xe2)][_0x3ba9cf(0xc7)][_0x3ba9cf(0xe5)](this[_0x3ba9cf(0xe2)][_0x3ba9cf(0xc7)][_0x3ba9cf(0xd1)](_0x513356));}[_0x39eb90(0xfd)](_0x56d139){const _0x524f10=_0x39eb90,_0x39d543=new _0x16f513(this[_0x524f10(0xe2)][_0x524f10(0x101)][_0x524f10(0xda)][_0x524f10(0x11c)]),_0x4d5dfc=new _0x1c6f37({'name':/^h[1-5]$/}),_0x1c5f04=[];let _0x5181bd=!0x1;for(const _0x350da5 of _0x56d139)_0x350da5['is'](_0x524f10(0xd2))&&_0x4d5dfc[_0x524f10(0xe4)](_0x350da5)&&(_0x1c5f04[_0x524f10(0xed)](_0x350da5),'h1'==_0x350da5[_0x524f10(0x11e)]&&(_0x5181bd=!0x0));if(_0x5181bd){for(const _0xa173ba of _0x1c5f04)_0x39d543[_0x524f10(0x120)]('h'+(parseInt(_0xa173ba[_0x524f10(0x11e)][0x1])+0x1),_0xa173ba);}}[_0x39eb90(0xcc)](){const _0x3bcb46=_0x39eb90,{data:_0x518400,editing:_0x421729}=this[_0x3bcb46(0xe2)],_0x46c404=_0x518400[_0x3bcb46(0xe3)][_0x3bcb46(0xfc)](_0x3bcb46(0x11f)),_0x424ec2=_0x518400[_0x3bcb46(0xfc)](_0x518400[_0x3bcb46(0xd1)](_0x46c404));return!!_0x421729[_0x3bcb46(0xda)][_0x3bcb46(0x10a)][_0x3bcb46(0xca)](_0x424ec2)[_0x3bcb46(0x109)]('h1');}[_0x39eb90(0x10e)](_0x3bb31c){const _0x4964c7=_0x39eb90;return this[_0x4964c7(0xe2)][_0x4964c7(0x101)][_0x4964c7(0xda)][_0x4964c7(0x10a)][_0x4964c7(0xd0)](this[_0x4964c7(0x118)],_0x3bb31c),this[_0x4964c7(0x118)][_0x4964c7(0x124)];}[_0x39eb90(0x11d)](_0x57e60d){const _0x13c97d=_0x39eb90,_0x148ac4=_0x57e60d[_0x13c97d(0x10b)]();return _0x148ac4[_0x13c97d(0xc6)](_0x13c97d(0xeb))?_0x148ac4[_0x13c97d(0xd3)](_0x13c97d(0xce))?_0x148ac4[_0x13c97d(0xfb)](0x7,_0x148ac4[_0x13c97d(0xfe)]-0x3):_0x148ac4[_0x13c97d(0xfb)](0x7):_0x57e60d;}}